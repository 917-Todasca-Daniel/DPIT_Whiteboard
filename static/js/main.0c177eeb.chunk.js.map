{"version":3,"sources":["canvas/CanvasDraw.js","canvas/drawImage.js","components/Button.js","components/HeroSection.js","components/pages/HomePage/Data.js","components/pages/HomePage/Home.js","components/pages/Footer/Footer.js","components/Navbar.js","canvas/MultiCanvasService.js","canvas/Canvas.js","notebook_gallery/useFetch.js","notebook_gallery/components/Card.js","notebook_gallery/components/AddModal.js","notebook_gallery/components/DeleteModal.js","notebook_gallery/components/GallerySection.js","notebook_gallery/components/Sidebar.js","notebook_gallery/components/Navbar.js","index.js","App.js","notebook_gallery/NotebookRepository.js"],"names":["exports","__esModule","default","undefined","_class","_temp","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_react2","_interopRequireDefault","_propTypes","_stroke","_propTypes2","_lazyBrush","_catenaryCurve","_resizeObserverPolyfill2","_drawImage2","obj","midPointBtw","p1","p2","x","y","canvasStyle","display","position","canvasTypes","name","zIndex","dimensionsPropTypes","oneOfType","number","string","_default","_PureComponent","props","instance","Constructor","TypeError","_classCallCheck","this","_this","self","ReferenceError","_possibleConstructorReturn","componentWillUnmount","canvasObserver","unobserve","canvasContainer","drawImage","imgSrc","image","Image","crossOrigin","onload","ctx","grid","img","src","getPointData","eraseCanvas","lazy","brush","toObject","erase","bSelect","select","undo","lines","redo_lines","push","pop","clear","simulateDrawingLines","immediate","triggerOnChange","redo","getSaveData","JSON","stringify","width","canvasWidth","height","canvasHeight","loadSaveData","saveData","immediateLoading","Error","_JSON$parse","parse","scaleX","scaleY","scaleAvg","map","line","points","p","brushRadius","_ref","curTime","timeoutGap","loadTimeOffset","forEach","brushColor","drawPoints","w","h","x2","y2","imageData","drawing","getImageData","putImageData","clearRect","globalCompositeOperation","canvas","pasteMemo","imgData","saveLine","_loop","window","setTimeout","slice","handleDrawStart","e","preventDefault","isPressing","_this$getPointerPos","getPointerPos","touches","update","both","handlePointerMove","handleDrawMove","_this$getPointerPos2","drawSelectBorder","time","borders","beginPath","setLineDash","rect","sel_x","sel_y","sel_w","sel_h","strokeStyle","lineDashOffset","lineWidth","stroke","saveSelectionToHistory","org_x","orig_x","orig_y","bPaste","onDrawFinish","pasteSelection","handleSelectionEnd","onSelectFinish","moveSelection","new_x","new_y","AddSelection","imageDataToJpg","imagedata","document","createElement","getContext","base64_encoded_image","toDataURL","split","myHeaders","Headers","append","raw","fetch","method","headers","body","redirect","then","response","text","result","console","log","parsed_result","changeOCRText","catch","error","handleDrawEnd","isDrawing","xs","getSelectionRectangle","pasteImageData","disabled","bSmooth","new_format_points","stroked_points","getStroke","Math","floor","handleCanvasResize","entries","observer","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref2","next","done","value","_entry$contentRect","contentRect","setCanvasSize","interface","temp","drawGrid","loop","once","style","isMouseInside","latestPosition","getBoundingClientRect","clientX","clientY","left","right","bottom","top","changedTouches","multiply","scale","isDisabled","isEnabled","mouseHasMoved","_ref3","lineJoin","lineCap","moveTo","len","midPoint","quadraticCurveTo","lineTo","_ref4","concat","onChange","valuesChanged","_ref5","_ref5$once","pointer","getPointerCoordinates","getBrushCoordinates","drawInterface","requestAnimationFrame","hideGrid","gridColor","countX","countY","hideInterface","globalAlpha","fillRect","fillStyle","arc","PI","fill","catenaryColor","catenary","drawToCanvas","chainLength","Catenary","loop_clock","subClass","superClass","create","constructor","enumerable","writable","configurable","setPrototypeOf","__proto__","_inherits","componentDidMount","_this2","LazyBrush","radius","lazyRadius","devicePixelRatio","enabled","initialPoint","innerWidth","innerHeight","observe","initX","initY","componentDidUpdate","prevProps","setRadius","render","_this3","className","background","backgroundColor","touchAction","ref","container","_ref6","isInterface","onMouseDown","onMouseMove","onMouseUp","onMouseOut","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","PureComponent","propTypes","func","bool","defaultProps","module","offsetX","offsetY","cx","cy","cw","ch","iw","ih","r","min","nw","nh","ar","abs","STYLES","SIZES","COLOR","Button","children","type","onClick","buttonStyle","buttonSize","buttonColor","checkButtonStyle","includes","checkButtonSize","checkButtonColor","HeroSection","lightBg","topLine","lightText","lightTextDesc","headline","description","buttonLabel","alt","imgStart","flexDirection","to","homeObjOne","Home","Footer","Navbar","useState","click","setClick","button","setButton","closeMobileMenu","showButton","useEffect","addEventListener","Provider","color","history","canvasList","pageCount","activeCanvas","textboxOCR","Undo","StopSelection","cmd","Redo","OnCanvasDraw","MoveSelection","updateActiveCanvas","textOCR","defaultValue","MultiPageCanvas","brushThickness","bEraseCanvas","bDisableCanvas","zoomScale","OCRRef","current","setValue","useRef","canvasHTMLs","marginValue","CanvasDraw","boxShadow","marginTop","overflow","padding","margin","DisableScroll","drawingStyle","brushThicknessMap","Map","brushSizeOptions","CssTextField","styled","TextField","borderBottomColor","borderColor","useFetch","url","data","setData","getData","a","json","Card","id","title","date","isFavorite","idState","optionState","selectedOption","isSelected","page","myIdState","setMyIdState","cardState","setCardState","setOption","setSelected","favoriteState","idealState","maxWidth","AddModal","inputElement","state","setState","addText","folderArray","fldrs","folderName","setChoice","optionArray","folder","Modal","size","centered","Header","closeButton","Title","Body","class","autoFocus","placeholder","event","Dropdown","fluid","selection","options","myFolder","find","textContent","onHide","add","DeleteModal","remove","randomNumber","max","random","sortOptions","GallerySection","sidebarValue","isSidebar","folderState","setFolderState","notebooks","covers","inputState","setInputState","visibleNotebooks","setVisibleNotebooks","modalShow","setModalShow","delModalShow","setDelModalShow","setTitle","setIdState","setOptionState","myFolders","allFolders","folderChoice","setFolderChoice","setFolderName","setSelectedOption","setIsSelected","setMyNotebooks","folderId","filter","notebook","isDeleted","folder_id","toString","keyword","toLowerCase","search","addNewNotebook","randomIndex","myPhotoUrl","photo_url","titleOccur","re1","RegExp","re2","flags","sort","join","regex","reduce","test","countNameOccurences","eventualTitle","newNb","Date","getTime","moment","format","editFavorites","deleteNotebook","restoreNotebook","index","findIndex","fol","inline","b","aa","reverse","bb","show","splice","colors","Main","shouldForwardProp","prop","theme","open","flexGrow","spacing","transition","transitions","easing","sharp","duration","leavingScreen","marginLeft","easeOut","enteringScreen","Sidebar","sidebarState","fdlr","folders","setFolders","input","setInput","setName","notesFromFolder","setNotesFromFolder","showFolders","setShowFolders","checked","setChecked","addFolder","nameOccur","finalName","newFolder","Fragment","Drawer","variant","anchor","marginRight","isOpened","switchState","setIsSidebar","ReactDOM","exact","path","component","EnableScroll","setErase","disableCanvas","bPanning","setPanning","setSelection","setSmooth","textOCRBox","setBrushColor","setBrushThickness","setZoomScale","smoothIconRef","zoomPanPitchRef","selectionIconRef","brushComboBoxRef","eraserIconRef","freeformIconRef","panningIconRef","colorPickerRef","drawingStylesBehaviours","iconRefMap","setDrawingStyle","newDrawingStyle","get","set","innerHTML","onKeyUp","ctrlKey","keyCode","label","multiline","rows","alignItems","justifyContent","IconButton","Box","mx","defaultIndex","editable","inputStyles","highlightColor","selectedOptionColor","onSelect","option","zOrder","hex","panning","limitToBounds","minScale","initialPositionX","initialPositionY","initialScale","onZoom","getElementById"],"mappings":"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","file":"static/js/main.0c177eeb.chunk.js","sourcesContent":["exports.__esModule = true;\r\nexports.default = undefined;\r\n\r\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\r\n\r\nvar _class, _temp;\r\n\r\nvar _react = require(\"react\");\r\n\r\nvar _react2 = _interopRequireDefault(_react);\r\n\r\nvar _propTypes = require(\"prop-types\");\r\n\r\nvar _stroke = require(\"perfect-freehand\");\r\n\r\nvar _propTypes2 = _interopRequireDefault(_propTypes);\r\n\r\nvar _lazyBrush = require(\"lazy-brush\");\r\n\r\nvar _catenaryCurve = require(\"catenary-curve\");\r\n\r\nvar _resizeObserverPolyfill = require(\"resize-observer-polyfill\");\r\n\r\nvar _resizeObserverPolyfill2 = _interopRequireDefault(_resizeObserverPolyfill);\r\n\r\nvar _drawImage = require(\"./drawImage\");\r\n\r\nvar _drawImage2 = _interopRequireDefault(_drawImage);\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\r\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\r\n\r\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\r\n\r\nfunction midPointBtw(p1, p2) {\r\n  return {\r\n    x: p1.x + (p2.x - p1.x) / 2,\r\n    y: p1.y + (p2.y - p1.y) / 2\r\n  };\r\n}\r\n\r\nvar canvasStyle = {\r\n  display: \"block\",\r\n  position: \"absolute\"\r\n};\r\n\r\nvar canvasTypes = [{\r\n  name: \"interface\",\r\n  zIndex: 15\r\n}, {\r\n  name: \"drawing\",\r\n  zIndex: 11\r\n}, {\r\n  name: \"temp\",\r\n  zIndex: 12\r\n}, {\r\n  name: \"select\",\r\n  zIndex: 13\r\n}, {\r\n  name: \"borders\",\r\n  zIndex: 14\r\n}, {\r\n  name: \"grid\",\r\n  zIndex: 10\r\n}];\r\n\r\nvar dimensionsPropTypes = _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]);\r\n\r\nvar _default = (_temp = _class = function (_PureComponent) {\r\n  _inherits(_default, _PureComponent);\r\n\r\n  function _default(props) {\r\n    _classCallCheck(this, _default);\r\n\r\n    var _this = _possibleConstructorReturn(this, _PureComponent.call(this, props));\r\n\r\n    _this.componentWillUnmount = function () {\r\n      _this.canvasObserver.unobserve(_this.canvasContainer);\r\n    };\r\n\r\n    _this.drawImage = function () {\r\n      if (!_this.props.imgSrc) return;\r\n\r\n      // Load the image\r\n      _this.image = new Image();\r\n\r\n      // Prevent SecurityError \"Tainted canvases may not be exported.\" #70\r\n      _this.image.crossOrigin = \"anonymous\";\r\n\r\n      // Draw the image once loaded\r\n      _this.image.onload = function () {\r\n        return (0, _drawImage2.default)({ ctx: _this.ctx.grid, img: _this.image });\r\n      };\r\n      _this.image.src = _this.props.imgSrc;\r\n    };\r\n\r\n    _this.getPointData = function() {\r\n      if (this.props.eraseCanvas)\r\n        return { ...this.lazy.brush.toObject(), erase: true };\r\n      if (this.props.bSelect)\r\n        return { ...this.lazy.brush.toObject(), select: true };\r\n      return this.lazy.brush.toObject();   \r\n    }\r\n\r\n    _this.undo = function () {\r\n      // console.log(JSON.stringify(_this.lines));\r\n      if (_this.lines.length === 0) return;\r\n      _this.redo_lines.push(_this.lines.pop());\r\n      var lines = _this.lines;\r\n      _this.clear();\r\n      _this.simulateDrawingLines({ lines: lines, immediate: true });\r\n      _this.triggerOnChange();\r\n    };\r\n\r\n    _this.redo = function () {\r\n      if (_this.redo_lines.length === 0) return;\r\n      var lines = _this.lines;\r\n      lines.push(_this.redo_lines.pop());\r\n      _this.clear();\r\n      _this.simulateDrawingLines({ lines: lines, immediate: true });\r\n      _this.triggerOnChange();\r\n      // console.log(JSON.stringify(_this.lines));\r\n    };\r\n\r\n    _this.getSaveData = function () {\r\n      // Construct and return the stringified saveData object\r\n      return JSON.stringify({\r\n        lines: _this.lines,\r\n        width: _this.props.canvasWidth,\r\n        height: _this.props.canvasHeight\r\n      });\r\n    };\r\n\r\n    _this.loadSaveData = function (saveData) {\r\n      var immediate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.props.immediateLoading;\r\n\r\n      if (typeof saveData !== \"string\") {\r\n        throw new Error(\"saveData needs to be of type string!\");\r\n      }\r\n\r\n      var _JSON$parse = JSON.parse(saveData),\r\n          lines = _JSON$parse.lines,\r\n          width = _JSON$parse.width,\r\n          height = _JSON$parse.height;\r\n\r\n      if (!lines || typeof lines.push !== \"function\") {\r\n        throw new Error(\"saveData.lines needs to be an array!\");\r\n      }\r\n\r\n      _this.clear();\r\n\r\n      if (width === _this.props.canvasWidth && height === _this.props.canvasHeight) {\r\n        _this.simulateDrawingLines({\r\n          lines: lines,\r\n          immediate: immediate\r\n        });\r\n      } else {\r\n        // we need to rescale the lines based on saved & current dimensions\r\n        var scaleX = _this.props.canvasWidth / width;\r\n        var scaleY = _this.props.canvasHeight / height;\r\n        var scaleAvg = (scaleX + scaleY) / 2;\r\n\r\n        _this.simulateDrawingLines({\r\n          lines: lines.map(function (line) {\r\n            return _extends({}, line, {\r\n              points: line.points.map(function (p) {\r\n                return {\r\n                  x: p.x * scaleX,\r\n                  y: p.y * scaleY\r\n                };\r\n              }),\r\n              brushRadius: line.brushRadius * scaleAvg\r\n            });\r\n          }),\r\n          immediate: immediate\r\n        });\r\n      }\r\n    };\r\n\r\n    _this.simulateDrawingLines = function (_ref) {\r\n      var lines = _ref.lines,\r\n          immediate = _ref.immediate;\r\n\r\n      // Simulate live-drawing of the loaded lines\r\n      // TODO use a generator\r\n      var curTime = 0;\r\n      var timeoutGap = immediate ? 0 : _this.props.loadTimeOffset;\r\n\r\n      lines.forEach(function (line) {\r\n        var points = line.points,\r\n            brushColor = line.brushColor,\r\n            brushRadius = line.brushRadius;\r\n\r\n        // Draw all at once if immediate flag is set, instead of using setTimeout\r\n\r\n        if (immediate) {\r\n          // Draw the points\r\n          _this.drawPoints({\r\n            points: points,\r\n            brushColor: brushColor,\r\n            brushRadius: brushRadius\r\n          });\r\n\r\n          if (brushColor === \"move-select\") {\r\n            const x = line.points[0];\r\n            const y = line.points[1];\r\n            const w = line.points[2];\r\n            const h = line.points[3];\r\n            const x2 = line.points[4];\r\n            const y2 = line.points[5];\r\n            const imageData = _this.ctx.drawing.getImageData(x, y, w, h);\r\n            \r\n            _this.ctx.select.putImageData(imageData, x2, y2);\r\n            _this.ctx.drawing.clearRect(x, y, w, h); \r\n            _this.ctx.drawing.globalCompositeOperation = \"source-over\";\r\n            _this.ctx.drawing.drawImage(_this.canvas.select, 0, 0, _this.canvas.select.width, _this.canvas.select.height);\r\n            _this.ctx.select.clearRect(x2, y2, w, h);\r\n            _this.lines.push(line);\r\n            return;\r\n          }\r\n\r\n          if (brushColor === \"paste-select\") {\r\n            const w = line.points[2];\r\n            const h = line.points[3];\r\n            const x2 = line.points[4];\r\n            const y2 = line.points[5];\r\n            const imageData = _this.pasteMemo[line.imgData];\r\n            \r\n            _this.ctx.select.putImageData(imageData, x2, y2);\r\n            _this.ctx.drawing.globalCompositeOperation = \"source-over\";\r\n            _this.ctx.drawing.drawImage(_this.canvas.select, 0, 0, _this.canvas.select.width, _this.canvas.select.height);\r\n            _this.ctx.select.clearRect(x2, y2, w, h);\r\n            _this.lines.push(line);\r\n            return;\r\n          }\r\n            // Save line with the drawn points\r\n          _this.points = points;\r\n          _this.saveLine({ brushColor: brushColor, brushRadius: brushRadius });\r\n          return;\r\n        }\r\n\r\n        // Use timeout to draw\r\n\r\n        var _loop = function _loop(i) {\r\n          curTime += timeoutGap;\r\n          window.setTimeout(function () {\r\n            _this.drawPoints({\r\n              points: points.slice(0, i + 1),\r\n              brushColor: brushColor,\r\n              brushRadius: brushRadius\r\n            });\r\n          }, curTime);\r\n        };\r\n\r\n        for (var i = 1; i < points.length; i++) {\r\n          _loop(i);\r\n        }\r\n\r\n        curTime += timeoutGap;\r\n        window.setTimeout(function () {\r\n          // Save this line with its props instead of this.props\r\n          _this.points = points;\r\n          _this.saveLine({ brushColor: brushColor, brushRadius: brushRadius });\r\n        }, curTime);\r\n      });\r\n    };\r\n\r\n    _this.handleDrawStart = function (e) {\r\n      e.preventDefault();\r\n\r\n      // Start drawing\r\n      _this.isPressing = true;\r\n\r\n      var _this$getPointerPos = _this.getPointerPos(e),\r\n          x = _this$getPointerPos.x,\r\n          y = _this$getPointerPos.y;\r\n\r\n      if (e.touches && e.touches.length > 0) {\r\n        // on touch, set catenary position to touch pos\r\n        _this.lazy.update({ x: x, y: y }, { both: true });\r\n      }\r\n\r\n      // Ensure the initial down position gets added to our line\r\n      _this.handlePointerMove(x, y);\r\n    };\r\n\r\n    _this.handleDrawMove = function (e) {\r\n      e.preventDefault();\r\n\r\n      var _this$getPointerPos2 = _this.getPointerPos(e),\r\n          x = _this$getPointerPos2.x,\r\n          y = _this$getPointerPos2.y;\r\n\r\n      _this.handlePointerMove(x, y);\r\n    };\r\n\r\n    _this.drawSelectBorder = function(time) {\r\n      _this.ctx.borders.beginPath();\r\n      _this.ctx.borders.setLineDash([25, 25]);\r\n      _this.ctx.borders.rect(_this.sel_x, _this.sel_y, _this.sel_w, _this.sel_h);\r\n      _this.ctx.borders.strokeStyle=\"#bf1717\";\r\n      _this.ctx.borders.lineDashOffset = -(time) * 2;\r\n      _this.ctx.borders.lineWidth = 6;\r\n      _this.ctx.borders.stroke();\r\n    }\r\n\r\n    _this.saveSelectionToHistory = function() {\r\n      if (_this.org_x < -100 || _this.sel_x < -100 || (_this.sel_x === _this.orig_x && _this.sel_y === _this.orig_y));\r\n      else {\r\n        var obj = (_this.bPaste ? \r\n          {\r\n            points: [_this.orig_x, _this.orig_y, _this.sel_w, _this.sel_h, _this.sel_x, _this.sel_y],\r\n            brushColor: \"paste-select\",\r\n            brushRadius: 2,\r\n            imgData: _this.pasteMemo.length - 1,\r\n          } : \r\n          {\r\n            points: [_this.orig_x, _this.orig_y, _this.sel_w, _this.sel_h, _this.sel_x, _this.sel_y],\r\n            brushColor: \"move-select\",\r\n            brushRadius: 2,\r\n          }\r\n        );\r\n        _this.bPaste = false;\r\n        _this.drawPoints(obj);\r\n        _this.lines.push(obj);\r\n        _this.props.onDrawFinish && _this.props.onDrawFinish(_this);\r\n      }\r\n    }\r\n\r\n    _this.pasteSelection = function() {\r\n      _this.saveSelectionToHistory();\r\n\r\n      _this.bPaste = true;\r\n      _this.ctx.drawing.globalCompositeOperation = \"source-over\";\r\n      _this.ctx.drawing.drawImage(_this.canvas.select, 0, 0, _this.canvas.select.width, _this.canvas.select.height);\r\n      const imageData = _this.ctx.select.getImageData(_this.sel_x, _this.sel_y, _this.sel_w, _this.sel_h);\r\n      _this.ctx.select.clearRect(_this.sel_x, _this.sel_y, _this.sel_w, _this.sel_h);\r\n      _this.sel_x += 100;\r\n      _this.sel_y += 100;\r\n      _this.ctx.select.putImageData(imageData, _this.sel_x, _this.sel_y);\r\n      _this.drawSelectBorder();\r\n    }\r\n\r\n    _this.handleSelectionEnd = function() {\r\n      _this.saveSelectionToHistory();\r\n\r\n      _this.props.onSelectFinish(_this, \"text nou\");\r\n      _this.ctx.drawing.globalCompositeOperation = \"source-over\";\r\n      _this.ctx.drawing.drawImage(_this.canvas.select, 0, 0, _this.canvas.select.width, _this.canvas.select.height);\r\n      _this.ctx.select.clearRect(0, 0, 8000, 8000);\r\n      _this.sel_x = -100000;\r\n      _this.sel_y = -100000;\r\n    }\r\n\r\n    _this.moveSelection = function(new_x, new_y) {\r\n      const imageData = _this.ctx.select.getImageData(_this.sel_x, _this.sel_y, _this.sel_w, _this.sel_h);\r\n      _this.ctx.select.clearRect(_this.sel_x, _this.sel_y, _this.sel_w, _this.sel_h);\r\n      _this.sel_x = new_x;\r\n      _this.sel_y = new_y;\r\n      _this.ctx.select.putImageData(imageData, _this.sel_x, _this.sel_y);\r\n    }\r\n\r\n    _this.AddSelection = function(new_x, new_y) {\r\n      const imageData = _this.ctx.select.getImageData(_this.sel_x, _this.sel_y, _this.sel_w, _this.sel_h);\r\n      _this.ctx.select.clearRect(_this.sel_x, _this.sel_y, _this.sel_w, _this.sel_h);\r\n      _this.sel_x += new_x;\r\n      _this.sel_y += new_y;\r\n      _this.ctx.select.putImageData(imageData, _this.sel_x, _this.sel_y);\r\n    }\r\n\r\n    _this.imageDataToJpg = function(imagedata) {\r\n      var canvas = document.createElement('canvas');\r\n      var ctx = canvas.getContext('2d');\r\n      canvas.width = imagedata.width;\r\n      canvas.height = imagedata.height;\r\n      ctx.putImageData(imagedata, 0, 0);\r\n  \r\n      // var image = new Image();\r\n      // image.src = canvas.toDataURL();\r\n      const base64_encoded_image = canvas.toDataURL().split(\",\")[1];\r\n\r\n      var myHeaders = new Headers();\r\n      myHeaders.append(\"Authorization\", \"Bearer ya29.c.Kp8BEQifYs7rl8dmRyEfB2wcuXUVAchZ72QZ84xR5AEV-b8s6btiXgPEwzlygwZYhXmWSe-M3x0QYdlfXKc54E2HuSzeImkgLHGNFYr6GxSx55DpHY4tOWUkHKINFDUyYnfkkfvStTyHHdn7BAdlf_XnjKVNGwt9WQSGGwsGiHuXE7-xcgQYxFlpT47FrjZhLMACRNpd0FiLKANQMXka-EY9...............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................\");\r\n      myHeaders.append(\"Content-Type\", \"application/json\");\r\n      \r\n      var raw = JSON.stringify({\r\n        \"requests\": [\r\n          {\r\n            \"image\": {\r\n              \"content\": base64_encoded_image\r\n            },\r\n            \"features\": [\r\n              {\r\n                \"type\": \"DOCUMENT_TEXT_DETECTION\"\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      });\r\n      \r\n      var requestOptions = {\r\n        method: 'POST',\r\n        headers: myHeaders,\r\n        body: raw,\r\n        redirect: 'follow'\r\n      };\r\n\r\n      fetch(\"https://vision.googleapis.com/v1/images:annotate\", requestOptions)\r\n        .then(response => response.text())\r\n        //.then(result => console.log(result))\r\n        .then(result => {console.log(result); const parsed_result = JSON.parse(result); _this.props.changeOCRText(parsed_result[\"responses\"][0][\"textAnnotations\"][0][\"description\"]); })\r\n        .catch(error => console.log('error', error));\r\n\r\n     \r\n    }\r\n\r\n    _this.handleDrawEnd = function (e) {\r\n      e.preventDefault();\r\n\r\n      // Draw to this end pos\r\n      _this.handleDrawMove(e);\r\n\r\n      // Stop drawing & save the drawn line\r\n      _this.isDrawing = false;\r\n      _this.isPressing = false;\r\n      if (_this.props.bSelect) {\r\n        _this.ctx.select.globalCompositeOperation = \"source-over\";\r\n        const xs = _this.getSelectionRectangle(_this.points);\r\n        if (xs.length == 4 && xs[0] > 0) {\r\n          _this.handleSelectionEnd();\r\n          var x = xs[0] | 0;\r\n          var y = xs[1] | 0;\r\n          var w = xs[2] | 0;\r\n          var h = xs[3] | 0;\r\n          if (w < 0) { x += w; w=-w; }\r\n          if (h < 0) { y += h; h=-h; }\r\n          if (w !== 0 && h !== 0) {\r\n            const imageData = _this.ctx.drawing.getImageData(x, y, w, h);\r\n            _this.imageDataToJpg(imageData);\r\n            _this.pasteImageData = imageData;\r\n            _this.pasteMemo.push(_this.pasteImageData);\r\n            _this.ctx.drawing.clearRect(x, y, w, h);\r\n            _this.sel_x = _this.orig_x = x;\r\n            _this.sel_y = _this.orig_y = y;\r\n            _this.sel_w = w;\r\n            _this.sel_h = h;\r\n            _this.ctx.select.putImageData(imageData, x, y);\r\n          }\r\n        }\r\n      }\r\n      if (_this.props.bSelect === false && _this.props.disabled === false && _this.points.length >= 2) _this.props.onDrawFinish && _this.props.onDrawFinish(_this);\r\n      \r\n      if (_this.props.bSmooth === true) {\r\n        console.log(\"etc\");\r\n        const new_format_points = _this.points.map(result => \r\n          [result[\"x\"], result[\"y\"], 0.5]\r\n        );\r\n        console.log(JSON.stringify(new_format_points));\r\n        const stroked_points = _stroke.getStroke(new_format_points);\r\n\r\n        console.log(JSON.stringify(stroked_points));\r\n        // console.log(JSON.stringify(new_format_stroked_points);\r\n        \r\n        for (var i = 0; i < _this.points.length && i < stroked_points.length; i++)\r\n        {\r\n          _this.points[i].x = Math.floor(stroked_points[i][0]);\r\n          _this.points[i].y = Math.floor(stroked_points[i][1]);\r\n        }\r\n\r\n       \r\n        console.log(JSON.stringify(_this.points));\r\n        if (_this.points.length >= 2 )\r\n        _this.drawPoints({\r\n          points: _this.points,\r\n          brushColor: _this.props.brushColor,\r\n          brushRadius: _this.props.brushRadius\r\n        });\r\n      }\r\n\r\n      _this.saveLine();\r\n    };\r\n\r\n    _this.handleCanvasResize = function (entries, observer) {\r\n      var saveData = _this.getSaveData();\r\n      for (var _iterator = entries, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\r\n        var _ref2;\r\n\r\n        if (_isArray) {\r\n          if (_i >= _iterator.length) break;\r\n          _ref2 = _iterator[_i++];\r\n        } else {\r\n          _i = _iterator.next();\r\n          if (_i.done) break;\r\n          _ref2 = _i.value;\r\n        }\r\n\r\n        var entry = _ref2;\r\n        var _entry$contentRect = entry.contentRect,\r\n            width = _entry$contentRect.width,\r\n            height = _entry$contentRect.height;\r\n\r\n        _this.setCanvasSize(_this.canvas.interface, width, height);\r\n        _this.setCanvasSize(_this.canvas.drawing, width, height);\r\n        _this.setCanvasSize(_this.canvas.temp, width, height);\r\n        _this.setCanvasSize(_this.canvas.select, width, height);\r\n        _this.setCanvasSize(_this.canvas.borders, width, height);\r\n        _this.setCanvasSize(_this.canvas.grid, width, height);\r\n\r\n        _this.drawGrid(_this.ctx.grid);\r\n        _this.drawImage();\r\n        _this.loop({ once: true });\r\n      }\r\n      _this.loadSaveData(saveData, true);\r\n    };\r\n\r\n    _this.setCanvasSize = function (canvas, width, height) {\r\n      canvas.width = width;\r\n      canvas.height = height;\r\n      canvas.style.width = width;\r\n      canvas.style.height = height;\r\n    };\r\n\r\n    _this.isMouseInside = function() {\r\n      const e = _this.latestPosition;\r\n      if (e) {\r\n        var rect = _this.canvas.interface.getBoundingClientRect();\r\n\r\n        var clientX = e.clientX;\r\n        var clientY = e.clientY;\r\n\r\n        if (clientX < rect.left) return false;\r\n        if (clientX > rect.right) return false;\r\n        if (clientY > rect.bottom) return false;\r\n        if (clientY < rect.top) return false;\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n    _this.getPointerPos = function (e) {\r\n      _this.latestPosition = e;\r\n      var rect = _this.canvas.interface.getBoundingClientRect();\r\n\r\n      // use cursor pos as default\r\n      var clientX = e.clientX;\r\n      var clientY = e.clientY;\r\n\r\n      // use first touch if available\r\n      if (e.changedTouches && e.changedTouches.length > 0) {\r\n        clientX = e.changedTouches[0].clientX;\r\n        clientY = e.changedTouches[0].clientY;\r\n      }\r\n\r\n      // return mouse/touch position inside canvas\r\n      const multiply = 1 / _this.props.scale;\r\n      return {\r\n        x: (clientX - rect.left) * multiply,\r\n        y: (clientY - rect.top) * multiply\r\n      };\r\n    };\r\n\r\n    _this.handlePointerMove = function (x, y) {\r\n      if (_this.props.disabled) return;\r\n\r\n      _this.lazy.update({ x: x, y: y });\r\n      var isDisabled = !_this.lazy.isEnabled();\r\n\r\n      if (_this.isPressing && !_this.isDrawing || isDisabled && _this.isPressing) {\r\n        // Start drawing and add point\r\n        _this.isDrawing = true;\r\n        _this.points.push(_this.getPointData());\r\n      }\r\n\r\n      if (_this.isDrawing) {\r\n        // Add new point\r\n        _this.points.push(_this.getPointData());\r\n\r\n        _this.redo_lines = [];\r\n\r\n        // Draw current points\r\n        if (_this.props.bSelect);\r\n        else\r\n          _this.drawPoints({\r\n            points: _this.points,\r\n            brushColor: _this.props.eraseCanvas ? \"erase\" : _this.props.brushColor,\r\n            brushRadius: _this.props.brushRadius\r\n          });\r\n      }\r\n\r\n      _this.mouseHasMoved = true;\r\n    };\r\n\r\n    _this.drawPoints = function (_ref3) {\r\n      var points = _ref3.points,\r\n          brushColor = _ref3.brushColor,\r\n          brushRadius = _ref3.brushRadius;\r\n\r\n      if (brushColor === \"move-select\" || brushColor === \"paste-select\") {\r\n        return;\r\n      }\r\n\r\n      _this.ctx.temp.lineJoin = \"round\";\r\n      _this.ctx.temp.lineCap = \"round\";\r\n      _this.ctx.temp.strokeStyle = (brushColor === \"erase\") ? \"#FFFFFF\" : brushColor;\r\n      this.ctx.drawing.globalCompositeOperation = (brushColor === \"erase\") ? \"destination-out\" : \"source-over\";\r\n\r\n      _this.ctx.temp.clearRect(0, 0, _this.ctx.temp.canvas.width, _this.ctx.temp.canvas.height);\r\n      _this.ctx.temp.lineWidth = brushRadius * 2;\r\n\r\n      var p1 = points[0];\r\n      var p2 = points[1];\r\n\r\n      {\r\n        _this.ctx.temp.moveTo(p2.x, p2.y);\r\n        _this.ctx.temp.beginPath();\r\n\r\n        for (var i = 1, len = points.length; i < len; i++) {\r\n          // we pick the point between pi+1 & pi+2 as the\r\n          // end point and p1 as our control point\r\n          var midPoint = midPointBtw(p1, p2);\r\n          _this.ctx.temp.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\r\n          p1 = points[i];\r\n          p2 = points[i + 1];\r\n        }\r\n        // Draw last line as a straight line while\r\n        // we wait for the next point to be able to calculate\r\n        // the bezier control point\r\n        _this.ctx.temp.lineTo(p1.x, p1.y);\r\n        _this.ctx.temp.stroke();\r\n      }\r\n    };\r\n\r\n    _this.saveLine = function () {\r\n      var _ref4 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n          brushColor = _ref4.brushColor,\r\n          brushRadius = _ref4.brushRadius;\r\n\r\n      if (_this.points.length < 2) return;\r\n\r\n      if (_this.points[0].erase) {\r\n        brushColor = \"erase\";\r\n      }\r\n\r\n      if (_this.points[0].select) {\r\n        _this.points.length = 0;\r\n        _this.ctx.temp.clearRect(0, 0, width, height);\r\n        return;\r\n      }\r\n\r\n      // Save as new line\r\n      _this.lines.push({\r\n        points: [].concat(_this.points),\r\n        brushColor: brushColor || _this.props.brushColor,\r\n        brushRadius: brushRadius || _this.props.brushRadius\r\n      });\r\n\r\n      // Reset points array\r\n      _this.points.length = 0;\r\n\r\n      var width = _this.canvas.temp.width;\r\n      var height = _this.canvas.temp.height;\r\n\r\n      // Copy the line to the drawing canvas\r\n      _this.ctx.drawing.drawImage(_this.canvas.temp, 0, 0, width, height);\r\n\r\n      // Clear the temporary line-drawing canvas\r\n      _this.ctx.temp.clearRect(0, 0, width, height);\r\n\r\n      _this.triggerOnChange();\r\n    };\r\n\r\n    _this.triggerOnChange = function () {\r\n      _this.props.onChange && _this.props.onChange(_this);\r\n    };\r\n\r\n    _this.clear = function () {\r\n      _this.lines = [];\r\n      _this.valuesChanged = true;\r\n      _this.ctx.drawing.clearRect(0, 0, _this.canvas.drawing.width, _this.canvas.drawing.height);\r\n      _this.ctx.temp.clearRect(0, 0, _this.canvas.temp.width, _this.canvas.temp.height);\r\n    };\r\n\r\n    _this.loop = function () {\r\n      var _ref5 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n          _ref5$once = _ref5.once,\r\n          once = _ref5$once === undefined ? false : _ref5$once;\r\n\r\n      _this.ctx.borders.clearRect(0, 0, _this.canvas.borders.width, _this.canvas.borders.height);\r\n      _this.drawSelectBorder(_this.time);\r\n\r\n      if (_this.mouseHasMoved || _this.valuesChanged) {\r\n        var pointer = _this.lazy.getPointerCoordinates();\r\n        var brush = _this.lazy.getBrushCoordinates();\r\n\r\n        _this.drawInterface(_this.ctx.interface, pointer, brush);\r\n        _this.mouseHasMoved = false;\r\n        _this.valuesChanged = false;\r\n      }\r\n\r\n      if (!once) {\r\n        setTimeout(() => {_this.time += 1}, 1);\r\n        window.requestAnimationFrame(function () {\r\n          _this.loop();\r\n        });\r\n      }\r\n    };\r\n\r\n    _this.drawGrid = function (ctx) {\r\n      if (_this.props.hideGrid) return;\r\n\r\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n      ctx.beginPath();\r\n      ctx.setLineDash([5, 1]);\r\n      ctx.setLineDash([]);\r\n      ctx.strokeStyle = _this.props.gridColor;\r\n      ctx.lineWidth = 0.5;\r\n\r\n      var gridSize = 25;\r\n\r\n      var countX = 0;\r\n      while (countX < ctx.canvas.width) {\r\n        countX += gridSize;\r\n        ctx.moveTo(countX, 0);\r\n        ctx.lineTo(countX, ctx.canvas.height);\r\n      }\r\n      ctx.stroke();\r\n\r\n      var countY = 0;\r\n      while (countY < ctx.canvas.height) {\r\n        countY += gridSize;\r\n        ctx.moveTo(0, countY);\r\n        ctx.lineTo(ctx.canvas.width, countY);\r\n      }\r\n      ctx.stroke();\r\n    };\r\n    \r\n    _this.getSelectionRectangle = function (points) {\r\n      var x = -100;\r\n      var y = -100;\r\n      var w = 10;\r\n      var h = 10;\r\n      if (_this.points.length > 0) {\r\n        x = _this.points[0].x;\r\n        y = _this.points[0].y;\r\n        w = _this.points[_this.points.length-1].x - x;\r\n        h = _this.points[_this.points.length-1].y - y;\r\n      }\r\n      return [x, y, w, h]; \r\n    };\r\n\r\n    _this.drawInterface = function (ctx, pointer, brush) {\r\n      if (_this.props.hideInterface) return;\r\n\r\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n\r\n      if (_this.props.bSelect) {\r\n        var x = _this.getSelectionRectangle(_this.points);\r\n        ctx.beginPath();\r\n        ctx.globalAlpha = 0.4;\r\n        ctx.fillRect(x[0], x[1], x[2], x[3]);\r\n        ctx.globalAlpha = 1;\r\n        ctx.fillStyle = \"#17C69A\";\r\n        ctx.lineWidth = 5;\r\n        ctx.stroke();\r\n      }\r\n      else {\r\n        // Draw brush preview\r\n        if (_this.isMouseInside()) {\r\n            ctx.beginPath();\r\n            ctx.fillStyle = this.props.eraseCanvas ? \"#FFFFFF\" : _this.props.brushColor;\r\n            ctx.arc(brush.x, brush.y, _this.props.brushRadius, 0, Math.PI * 2, true);\r\n            ctx.fill();\r\n        }\r\n\r\n        // Draw mouse point (the one directly at the cursor)\r\n        ctx.beginPath();\r\n        ctx.fillStyle = _this.props.catenaryColor;\r\n        ctx.arc(pointer.x, pointer.y, 4, 0, Math.PI * 2, true);\r\n        ctx.fill();\r\n\r\n        // Draw catenary\r\n        if (_this.lazy.isEnabled()) {\r\n          ctx.beginPath();\r\n          ctx.lineWidth = 2;\r\n          ctx.lineCap = \"round\";\r\n          ctx.setLineDash([2, 4]);\r\n          ctx.strokeStyle = _this.props.catenaryColor;\r\n          _this.catenary.drawToCanvas(_this.ctx.interface, brush, pointer, _this.chainLength);\r\n          ctx.stroke();\r\n        }\r\n\r\n        // Draw brush point (the one in the middle of the brush preview)\r\n        ctx.beginPath();\r\n        ctx.fillStyle = _this.props.catenaryColor;\r\n        ctx.arc(brush.x, brush.y, 2, 0, Math.PI * 2, true);\r\n        ctx.fill();\r\n      }\r\n    };\r\n\r\n    _this.canvas = {};\r\n    _this.ctx = {};\r\n\r\n    _this.catenary = new _catenaryCurve.Catenary();\r\n\r\n    _this.points = [];\r\n    _this.lines = [];\r\n    _this.pasteMemo = [];\r\n    _this.pasteImageData = null;\r\n    _this.bPaste = false;\r\n    _this.loop_clock = null;\r\n    _this.time = 0.0;\r\n    _this.redo_lines = [];\r\n    _this.latestPosition = null;\r\n\r\n    _this.mouseHasMoved = true;\r\n    _this.valuesChanged = true;\r\n    _this.isDrawing = false;\r\n    _this.isPressing = false;\r\n    _this.orig_x = -1000;\r\n    _this.orig_y = -1000;\r\n    _this.sel_x = -1000;\r\n    _this.sel_y = -1000;\r\n    _this.sel_w = 10;\r\n    _this.sel_h = 10;\r\n    return _this;\r\n  }\r\n\r\n  _default.prototype.componentDidMount = function componentDidMount() {\r\n    var _this2 = this;\r\n\r\n    this.lazy = new _lazyBrush.LazyBrush({\r\n      radius: this.props.lazyRadius * window.devicePixelRatio,\r\n      enabled: true,\r\n      initialPoint: {\r\n        x: window.innerWidth / 2,\r\n        y: window.innerHeight / 2\r\n      }\r\n    });\r\n    this.chainLength = this.props.lazyRadius * window.devicePixelRatio;\r\n\r\n    this.canvasObserver = new _resizeObserverPolyfill2.default(function (entries, observer) {\r\n      return _this2.handleCanvasResize(entries, observer);\r\n    });\r\n    this.canvasObserver.observe(this.canvasContainer);\r\n\r\n    this.drawImage();\r\n    this.loop();\r\n\r\n    window.setTimeout(function () {\r\n      var initX = window.innerWidth / 2;\r\n      var initY = window.innerHeight / 2;\r\n      _this2.lazy.update({ x: initX - _this2.chainLength / 4, y: initY }, { both: true });\r\n      _this2.lazy.update({ x: initX + _this2.chainLength / 4, y: initY }, { both: false });\r\n      _this2.mouseHasMoved = true;\r\n      _this2.valuesChanged = true;\r\n      _this2.clear();\r\n\r\n      // Load saveData from prop if it exists\r\n      if (_this2.props.saveData) {\r\n        _this2.loadSaveData(_this2.props.saveData);\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  _default.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\r\n    if (prevProps.lazyRadius !== this.props.lazyRadius) {\r\n      // Set new lazyRadius values\r\n      this.chainLength = this.props.lazyRadius * window.devicePixelRatio;\r\n      this.lazy.setRadius(this.props.lazyRadius * window.devicePixelRatio);\r\n    }\r\n\r\n    if (prevProps.saveData !== this.props.saveData) {\r\n      this.loadSaveData(this.props.saveData);\r\n    }\r\n\r\n    if (JSON.stringify(prevProps) !== JSON.stringify(this.props)) {\r\n      // Signal this.loop function that values changed\r\n      this.valuesChanged = true;\r\n    }\r\n  };\r\n\r\n  _default.prototype.render = function render() {\r\n    var _this3 = this;\r\n\r\n    return _react2.default.createElement(\r\n      \"div\",\r\n      {\r\n        className: this.props.className,\r\n        style: _extends({\r\n          display: \"block\",\r\n          background: this.props.backgroundColor,\r\n          touchAction: \"none\",\r\n          width: this.props.canvasWidth,\r\n          height: this.props.canvasHeight\r\n        }, this.props.style),\r\n        ref: function ref(container) {\r\n          if (container) {\r\n            _this3.canvasContainer = container;\r\n          }\r\n        }\r\n      },\r\n      canvasTypes.map(function (_ref6) {\r\n        var name = _ref6.name,\r\n            zIndex = _ref6.zIndex;\r\n\r\n        var isInterface = name === \"interface\";\r\n        return _react2.default.createElement(\"canvas\", {\r\n          key: name,\r\n          ref: function ref(canvas) {\r\n            if (canvas) {\r\n              _this3.canvas[name] = canvas;\r\n              _this3.ctx[name] = canvas.getContext(\"2d\");\r\n            }\r\n          },\r\n          style: _extends({}, canvasStyle, { zIndex: zIndex }),\r\n          onMouseDown: isInterface ? _this3.handleDrawStart : undefined,\r\n          onMouseMove: isInterface ? _this3.handleDrawMove : undefined,\r\n          onMouseUp: isInterface ? _this3.handleDrawEnd : undefined,\r\n          onMouseOut: isInterface ? _this3.handleDrawEnd : undefined,\r\n          onTouchStart: isInterface ? _this3.handleDrawStart : undefined,\r\n          onTouchMove: isInterface ? _this3.handleDrawMove : undefined,\r\n          onTouchEnd: isInterface ? _this3.handleDrawEnd : undefined,\r\n          onTouchCancel: isInterface ? _this3.handleDrawEnd : undefined\r\n        });\r\n      })\r\n    );\r\n  };\r\n\r\n  return _default;\r\n}(_react.PureComponent), _class.propTypes = {\r\n  onChange: _propTypes2.default.func,\r\n  scale: _propTypes2.default.number,\r\n  loadTimeOffset: _propTypes2.default.number,\r\n  lazyRadius: _propTypes2.default.number,\r\n  brushRadius: _propTypes2.default.number,\r\n  brushColor: _propTypes2.default.string,\r\n  catenaryColor: _propTypes2.default.string,\r\n  gridColor: _propTypes2.default.string,\r\n  backgroundColor: _propTypes2.default.string,\r\n  hideGrid: _propTypes2.default.bool,\r\n  canvasWidth: dimensionsPropTypes,\r\n  canvasHeight: dimensionsPropTypes,\r\n  disabled: _propTypes2.default.bool,\r\n  imgSrc: _propTypes2.default.string,\r\n  saveData: _propTypes2.default.string,\r\n  immediateLoading: _propTypes2.default.bool,\r\n  hideInterface: _propTypes2.default.bool,\r\n  eraseCanvas: _propTypes2.default.bool,\r\n  bSelect: _propTypes2.default.bool,\r\n  onDrawFinish: _propTypes2.default.func,\r\n  onSelectFinish: _propTypes2.default.func,\r\n  changeOCRText: _propTypes2.default.func,\r\n  bSmooth: _propTypes2.default.bool,\r\n}, _class.defaultProps = {\r\n  onChange: null,\r\n  scale: 1,\r\n  loadTimeOffset: 5,\r\n  lazyRadius: 12,\r\n  brushRadius: 10,\r\n  brushColor: \"#444\",\r\n  catenaryColor: \"#0a0302\",\r\n  gridColor: \"rgba(150,150,150,0.17)\",\r\n  backgroundColor: \"#FFF\",\r\n  hideGrid: false,\r\n  canvasWidth: 400,\r\n  canvasHeight: 400,\r\n  disabled: false,\r\n  imgSrc: \"\",\r\n  saveData: \"\",\r\n  immediateLoading: false,\r\n  hideInterface: false,\r\n  bSelect: false,\r\n  eraseCanvas: false,\r\n  onDrawFinish: (ref) => { },\r\n  onSelectFinish: (ref) => { },\r\n  changeOCRText: (text) => { },\r\n  bSmooth: false,\r\n}, _temp);\r\n\r\nexports.default = _default;\r\nmodule.exports = exports[\"default\"];","exports.__esModule = true;\r\nexports.default = drawImageProp;\r\n\r\n\r\n// fixed\r\n// sticky-top\r\n\r\n\r\n/** \r\n * Original from: https://stackoverflow.com/questions/21961839/simulation-background-size-cover-in-canvas\r\n * Original By Ken Fyrstenberg Nilsen\r\n * \r\n * Note: img must be fully loaded or have correct width & height set.\r\n */\r\nfunction drawImageProp() {\r\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\r\n      ctx = _ref.ctx,\r\n      img = _ref.img,\r\n      x = _ref.x,\r\n      y = _ref.y,\r\n      w = _ref.w,\r\n      h = _ref.h,\r\n      offsetX = _ref.offsetX,\r\n      offsetY = _ref.offsetY;\r\n\r\n  // Defaults\r\n  if (typeof x !== \"number\") x = 0;\r\n  if (typeof y !== \"number\") y = 0;\r\n  if (typeof w !== \"number\") w = ctx.canvas.width;\r\n  if (typeof h !== \"number\") h = ctx.canvas.height;\r\n  if (typeof offsetX !== \"number\") offsetX = 0.5;\r\n  if (typeof offsetY !== \"number\") offsetY = 0.5;\r\n\r\n  // keep bounds [0.0, 1.0]\r\n  if (offsetX < 0) offsetX = 0;\r\n  if (offsetY < 0) offsetY = 0;\r\n  if (offsetX > 1) offsetX = 1;\r\n  if (offsetY > 1) offsetY = 1;\r\n\r\n  var iw = img.width,\r\n      ih = img.height,\r\n      r = Math.min(w / iw, h / ih),\r\n      nw = iw * r,\r\n      // new prop. width\r\n  nh = ih * r,\r\n      // new prop. height\r\n  cx,\r\n      cy,\r\n      cw,\r\n      ch,\r\n      ar = 1;\r\n\r\n  // decide which gap to fill\r\n  if (nw < w) ar = w / nw;\r\n  if (Math.abs(ar - 1) < 1e-14 && nh < h) ar = h / nh; // updated\r\n  nw *= ar;\r\n  nh *= ar;\r\n\r\n  // calc source rectangle\r\n  cw = iw / (nw / w);\r\n  ch = ih / (nh / h);\r\n\r\n  cx = (iw - cw) * offsetX;\r\n  cy = (ih - ch) * offsetY;\r\n\r\n  // make sure source rectangle is valid\r\n  if (cx < 0) cx = 0;\r\n  if (cy < 0) cy = 0;\r\n  if (cw > iw) cw = iw;\r\n  if (ch > ih) ch = ih;\r\n\r\n  // fill image in dest. rectangle\r\n  ctx.drawImage(img, cx, cy, cw, ch, x, y, w, h);\r\n}\r\nmodule.exports = exports[\"default\"];","import React from 'react';\r\nimport './Button.css';\r\n\r\nconst STYLES = ['home_btn--primary', 'home_btn--outline-dark', 'home_btn--outline-light']\r\n\r\nconst SIZES = ['home_btn--medium', 'home_btn--large', 'home_btn--mobile', 'home_btn--wide']\r\n\r\nconst COLOR = ['primary', 'blue', 'red', 'green']\r\n\r\nexport const Button = ({\r\n    children, \r\n    type, \r\n    onClick, \r\n    buttonStyle, \r\n    buttonSize, \r\n    buttonColor\r\n}) => {\r\n    const checkButtonStyle = STYLES.includes(buttonStyle) ? \r\n    buttonStyle : STYLES[0]\r\n    \r\n    const checkButtonSize = SIZES.includes(buttonSize) ? \r\n    buttonSize : SIZES[0]\r\n\r\n    const checkButtonColor = COLOR.includes(buttonColor) ? \r\n    buttonColor : null\r\n\r\n    return (\r\n        <button className={`home_btn ${checkButtonStyle} ${checkButtonSize} ${checkButtonColor}`}\r\n        onClick={onClick} \r\n        type={type}\r\n        > {children} </button>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport './HeroSection.css';\r\nimport { Button } from './Button';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction HeroSection({\r\n  lightBg,\r\n  topLine,\r\n  lightText,\r\n  lightTextDesc,\r\n  headline,\r\n  description,\r\n  buttonLabel,\r\n  img,\r\n  alt,\r\n  imgStart\r\n}) {\r\n  return (\r\n    <>\r\n      <div\r\n        className={lightBg ? 'home__hero-section' : 'home__hero-section darkBg'}\r\n      >\r\n        <div className='container'>\r\n          <div\r\n            className='row home__hero-row'\r\n            style={{\r\n              display: 'flex',\r\n              flexDirection: imgStart === 'start' ? 'row-reverse' : 'row'\r\n            }}\r\n          >\r\n            <div className='col'>\r\n              <div className='home__hero-text-wrapper'>\r\n                <div className='top-line'>{topLine}</div>\r\n                <h1 className={lightText ? 'heading' : 'heading dark'}>\r\n                  {headline}\r\n                </h1>\r\n                <p\r\n                  className={\r\n                    lightTextDesc\r\n                      ? 'home__hero-subtitle'\r\n                      : 'home__hero-subtitle dark'\r\n                  }\r\n                >\r\n                  {description}\r\n                </p>\r\n                <Link to='/sign-up'>\r\n                  <Button buttonSize='home_btn--wide' buttonColor='green'>\r\n                    {buttonLabel}\r\n                  </Button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n            <div className='col'>\r\n              <div className='home__hero-img-wrapper'>\r\n                <img src={img} alt={alt} className='home__hero-img' />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default HeroSection;","export const homeObjOne = {\r\n    lightBg: true,\r\n    lightText: true,\r\n    lightTextDesc: false,\r\n    topLine: 'For students by students',\r\n    headline: 'Learn, organize, reach your goals',\r\n    description:\r\n      'Get access to our notes-taking app that ...',\r\n    buttonLabel: 'Sign up now',\r\n    imgStart: '',\r\n    img: 'images/svg-1.svg',\r\n    alt: ''\r\n  };\r\n  \r\n  export const homeObjTwo = {\r\n    lightBg: false,\r\n    lightText: true,\r\n    lightTextDesc: true,\r\n    topLine: '100% SECURE',\r\n    headline: 'Stay protected 24/7 anywhere anytime',\r\n    description:\r\n      'We have you covered no matter where you are located. Over 140 locations worldwide to ensure you have access anytime',\r\n    buttonLabel: 'Learn More',\r\n    imgStart: '',\r\n    img: 'images/svg-5.svg',\r\n    alt: 'Vault'\r\n  };\r\n  \r\n  export const homeObjThree = {\r\n    lightBg: true,\r\n    lightText: false,\r\n    lightTextDesc: false,\r\n    topLine: 'EASY SETUP',\r\n    headline: 'Super fast and simple onboarding process',\r\n    description:\r\n      \"Get everything set up and ready in under 10 minutes. All you need to do is add your information and you're ready to go.\",\r\n    buttonLabel: 'Start Now',\r\n    imgStart: 'start',\r\n    img: 'images/svg-7.svg',\r\n    alt: 'Vault'\r\n  };\r\n  \r\n  export const homeObjFour = {\r\n    lightBg: false,\r\n    lightText: true,\r\n    lightTextDesc: true,\r\n    topLine: 'DATA ANALYTICS',\r\n    headline: 'Every transaction is stored on our secure cloud database',\r\n    description:\r\n      'Never ever have to worry again about saved reciepts. We store your data, so you can access it anytime.',\r\n    buttonLabel: 'Sign Up Now',\r\n    imgStart: 'start',\r\n    img: 'images/svg-8.svg',\r\n    alt: 'Vault'\r\n  };","import React from 'react';\r\nimport HeroSection from '../../HeroSection';\r\nimport { homeObjOne, homeObjTwo, homeObjThree, homeObjFour } from './Data';\r\n\r\nfunction Home() {\r\n  return (\r\n    <>\r\n      <HeroSection {...homeObjOne} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Home;","import React from 'react';\r\nimport './Footer.css';\r\nimport { Button } from '../../Button';\r\nimport { Link } from 'react-router-dom';\r\nimport { GiWhiteBook } from 'react-icons/gi';\r\nimport {\r\n  FaFacebook,\r\n  FaInstagram,\r\n  FaYoutube,\r\n  FaTwitter,\r\n  FaLinkedin\r\n} from 'react-icons/fa';\r\nimport { MdFingerprint } from 'react-icons/md';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className='footer-container'>\r\n      \r\n      <div className='footer-links'>\r\n        <div className='footer-link-wrapper'>\r\n          <div className='footer-link-items'>\r\n            <h2>About Us</h2>\r\n            <Link to='/sign-up'>How it works</Link>\r\n            <Link to='/'>Testimonials</Link>\r\n            <Link to='/'>Privacy & Cookies</Link>\r\n            <Link to='/'>Terms & Conditions</Link>\r\n          </div>\r\n          <div className='footer-link-items'>\r\n            <h2>Contact Us</h2>\r\n            <Link to='/'>Contact</Link>\r\n            <Link to='/'>Support</Link>\r\n            <Link to='/'>Destinations</Link>\r\n            <Link to='/'>Sponsorships</Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <section className='social-media'>\r\n        <div className='social-media-wrap'>\r\n          <div className='footer-logo'>\r\n            <Link to='/' className='social-logo'>\r\n                        <img src={'logo_white.PNG'} style={{width: 150}} className='navbar-icon'/>\r\n            </Link>\r\n          </div>\r\n          <small className='website-rights'>WhiteBoard  2021</small>\r\n          <div className='social-icons'>\r\n            <Link\r\n              className='social-icon-link'\r\n              to='/'\r\n              target='_blank'\r\n              aria-label='Facebook'\r\n            >\r\n              <FaFacebook />\r\n            </Link>\r\n            <Link\r\n              className='social-icon-link'\r\n              to='/'\r\n              target='_blank'\r\n              aria-label='Instagram'\r\n            >\r\n              <FaInstagram />\r\n            </Link>\r\n            <Link\r\n              className='social-icon-link'\r\n              to={\r\n                '//www.youtube.com/channel/UCsKsymTY_4BYR-wytLjex7A?view_as=subscriber'\r\n              }\r\n              target='_blank'\r\n              aria-label='Youtube'\r\n            >\r\n              <FaYoutube />\r\n            </Link>\r\n            <Link\r\n              className='social-icon-link'\r\n              to='/'\r\n              target='_blank'\r\n              aria-label='Twitter'\r\n            >\r\n              <FaTwitter />\r\n            </Link>\r\n            <Link\r\n              className='social-icon-link'\r\n              to='/'\r\n              target='_blank'\r\n              aria-label='LinkedIn'\r\n            >\r\n              <FaLinkedin />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { GiWhiteBook } from 'react-icons/gi';\r\nimport { FaBars, FaTimes } from 'react-icons/fa';\r\nimport { Button } from './Button';\r\nimport './Button.css'\r\nimport './Navbar.css';\r\nimport { IconContext } from 'react-icons/lib'\r\n\r\n\r\nfunction Navbar() {\r\n    const [click, setClick] = useState(false)\r\n    const [button, setButton] = useState(true);\r\n\r\n    const handleClick = () => setClick(!click);\r\n    const closeMobileMenu = () => setClick(false);\r\n\r\n    const showButton = () => {\r\n        if (window.innerWidth <= 960) {\r\n            setButton(false)\r\n        }\r\n        else {\r\n            setButton(true)\r\n        }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        showButton();\r\n    }, []);\r\n    window.addEventListener('resize', showButton);\r\n\r\n    return (\r\n        <IconContext.Provider value={{ color: '#028174'}}>\r\n            <div className=\"home_navbar\">\r\n                <div className=\"home_navbar-container container\">\r\n                    <Link to= '/' className=\"home_navbar-logo\" onClick={closeMobileMenu}>\r\n                        <img src={'logo.PNG'} style={{width: 150}} className='home__hero-img'/>\r\n                    </Link>\r\n\r\n                    <div className=\"home_menu-icon\" onClick={handleClick}>\r\n                        {click ? <FaTimes /> : <FaBars /> }\r\n                    </div>\r\n                    <ul className={click ? 'home_nav-home_menu active' : 'home_nav-home_menu'}> \r\n                        <li className=\"home_nav-item\">\r\n                            <Link to='/how-it-works' className=\"home_nav-links\" onClick={closeMobileMenu}>\r\n                                How it works\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"home_nav-item\">\r\n                            <Link to='/about-us' className=\"home_nav-links\" onClick={closeMobileMenu}>\r\n                                About us\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"home_nav-item\">\r\n                            <Link to='/contact' className=\"home_nav-links\" onClick={closeMobileMenu}>\r\n                                Contact\r\n                            </Link>\r\n                        </li>\r\n                        <li className=\"home_nav-home_btn\">\r\n                            {button ? (\r\n                                <Link to='/repo' className=\"home_btn-link\" onClick={closeMobileMenu}>\r\n                                    <Button buttonStyle='home_btn--outline-dark'>\r\n                                    Log In\r\n                                    </Button>\r\n                                </Link>\r\n                            ) : (\r\n                                <Link to='/repo' className=\"home_btn-link\" onClick={closeMobileMenu}>\r\n                                    <Button buttonStyle='home_btn--outline-dark'\r\n                                            buttonSize='home_btn--mobile'>\r\n                                    Log In\r\n                                    </Button>\r\n                                </Link>   \r\n                            )}\r\n                        </li>\r\n                        <li className=\"home_nav-home_btn\">\r\n                            {button ? (\r\n                                <Link to='/sign-up' className=\"home_btn-link\" onClick={closeMobileMenu}>\r\n                                    <Button buttonStyle='home_btn--outline-light'>\r\n                                    Sign Up\r\n                                    </Button>\r\n                                </Link>\r\n                            ) : (\r\n                                <Link to='/sign-up' className=\"home_btn-link\" onClick={closeMobileMenu}>\r\n                                    <Button buttonStyle='home_btn--outline-light'\r\n                                            buttonSize='home_btn--mobile'>\r\n                                    Sign Up\r\n                                    </Button>\r\n                                </Link>   \r\n                            )}\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </IconContext.Provider>\r\n    )\r\n}\r\n\r\nexport default Navbar\r\n","import * as CanvasDraw from \"./CanvasDraw\";\r\nimport React, { useState, useRef } from 'react';\r\n\r\nvar history = [];\r\nvar redo = [];\r\nvar canvasList = [];\r\nvar pageCount = 1;\r\nvar moveSpeed = 100;\r\nvar activeCanvas = null;\r\n\r\nvar textboxOCR = null;\r\n\r\nconst Paste = () => {\r\n    if (activeCanvas) activeCanvas.pasteSelection();\r\n}\r\n\r\nconst Undo = () => {\r\n    StopSelection();\r\n    if (history.length === 0) return;\r\n    const cmd = history.pop();\r\n    redo.push(cmd);\r\n    if (cmd.type === \"draw\") {\r\n        cmd.canvas.undo();\r\n    }\r\n}\r\n\r\nconst Redo = () => {\r\n    StopSelection();\r\n    if (redo.length === 0) return;\r\n    const cmd = redo.pop();\r\n    history.push(cmd);\r\n    if (cmd.type === \"draw\") {\r\n        cmd.canvas.redo();\r\n    }\r\n}\r\n\r\nconst OnCanvasDraw = (ref) => {\r\n    redo = [];\r\n    history.push({\r\n        type: \"draw\",\r\n        canvas: ref,\r\n    });\r\n}\r\n\r\nconst MoveSelection = (x, y) => {\r\n    if (activeCanvas) activeCanvas.AddSelection(x*moveSpeed, y*moveSpeed);\r\n}\r\n\r\nconst StopSelection = () => {\r\n    if (activeCanvas) activeCanvas.handleSelectionEnd();\r\n}\r\n\r\nconst updateActiveCanvas = (ref, textOCR) => {\r\n    if (textboxOCR) {\r\n        textboxOCR.defaultValue = textOCR;\r\n    }\r\n    else console.log(\"aoleo\");\r\n    if (activeCanvas !== ref && activeCanvas) activeCanvas.handleSelectionEnd();\r\n    activeCanvas = ref;\r\n}\r\n\r\nvar update = () => {};\r\n\r\nconst MultiPageCanvas = (brushThickness, brushColor, bEraseCanvas, bDisableCanvas, bSmooth, changeOCRText, zoomScale, OCRRef, bSelect) => {\r\n    textboxOCR = OCRRef.current;\r\n    const [value, setValue] = useState(0); \r\n    canvasList = [];\r\n    const ref = useRef(null);\r\n    update = () => { setValue(value+1); }\r\n    var canvasHTMLs = [];\r\n    var marginValue = \"0\";\r\n\tfor (var i=0; i<pageCount; ++i) {\r\n        if (i === 0) marginValue = \"0\";\r\n        else marginValue = \"5em\";\r\n\t\tcanvasHTMLs.push(<CanvasDraw \r\n\t\t\tstyle\t\t={{boxShadow: \"0px 10px 35px 1px #969696\", marginTop: marginValue}}\r\n\t\t\tlazyRadius\t={0}\r\n\t\t\tcanvasWidth\t={2480} \r\n\t\t\tcanvasHeight={3508}\r\n            ref         ={ref}\r\n            onDrawFinish={OnCanvasDraw}\r\n            onSelectFinish={updateActiveCanvas}      \r\n            changeOCRText={changeOCRText}\r\n            bSmooth     ={bSmooth}\r\n\t\t\tbrushRadius\t={brushThickness}\r\n\t\t\tbrushColor\t={brushColor}\r\n\t\t\teraseCanvas\t={bEraseCanvas}\r\n\t\t\tdisabled\t={bDisableCanvas}\r\n\t\t\tscale\t\t={zoomScale}\r\n            bSelect     ={bSelect}\r\n\t\t\thideGrid\t={true}\r\n\t\t\timgSrc\t\t={\"https://i.ibb.co/KhcjQ64/lines.jpg\"}\r\n\t\t\t/>);\r\n        canvasList.push(ref.current);\r\n\t}\r\n\treturn canvasHTMLs;\r\n}\r\n\r\nconst IncremenentPageCount = () => {\r\n    update();\r\n    pageCount += 1;\r\n}\r\n\r\nexport { Undo, Redo, OnCanvasDraw, MultiPageCanvas, IncremenentPageCount, Paste, MoveSelection, StopSelection }","import React, { useRef, useState } from \"react\";\r\nimport { TransformWrapper, TransformComponent } from \"react-zoom-pan-pinch\";\r\nimport { SwatchesPicker  } from 'react-color';\r\nimport ComboBox from 'react-responsive-combo-box'\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CreateIcon from '@material-ui/icons/Create';\r\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\r\nimport UndoIcon from '@material-ui/icons/Undo';\r\nimport RedoIcon from '@material-ui/icons/Redo';\r\nimport OpenWithIcon from '@material-ui/icons/OpenWith';\r\nimport FormatColorTextIcon from '@material-ui/icons/FormatColorText';\r\nimport AutoFixHighIcon from '@mui/icons-material/AutoFixHigh';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport Box from '@material-ui/core/Box'\r\nimport PhotoSizeSelectLargeIcon from '@material-ui/icons/PhotoSizeSelectLarge';\r\nimport TextField from '@mui/material/TextField';\r\nimport { styled } from '@mui/material/styles';\r\nimport GridViewIcon from '@mui/icons-material/GridView';\r\n\r\nimport 'react-responsive-combo-box/dist/index.css'\r\nimport './clickthrough.css'\r\n\r\nimport { Undo, Redo, MultiPageCanvas, IncremenentPageCount, Paste, MoveSelection, StopSelection } from './MultiCanvasService.js'\r\n\r\nconst DisableScroll = () => {\r\n\tconst safeDocument = typeof document !== 'undefined' ? document : {};\r\n\tconst { body } = safeDocument;\r\n    if (!body || !body.style) return;\r\n    body.style.overflow = 'hidden'; \r\n\tbody.style.padding = 0;\r\n\tbody.style.margin = 0;\r\n}\r\n\r\nDisableScroll();\r\n\r\nvar drawingStyle = \"freeform\";\r\nvar brushThicknessMap = new Map([\r\n\t['eraser', 80], ['freeform', 3], ['smoothing', 3]\r\n])\r\nvar brushSizeOptions = [3, 6, 20, 80];\r\n\r\nconst CssTextField = styled(TextField)({\r\n\t'& label.Mui-focused': {\r\n\t  color: '#17C69A',\r\n\t},\r\n\t'& .MuiInput-underline:after': {\r\n\t  borderBottomColor: 'green',\r\n\t},\r\n\t'& .MuiOutlinedInput-root': {\r\n\t  '& fieldset': {\r\n\t\tborderColor: 'black',\r\n\t  },\r\n\t  '&:hover fieldset': {\r\n\t\tborderColor: '#149172',\r\n\t  },\r\n\t  '&.Mui-focused fieldset': {\r\n\t\tborderColor: '#17C69A',\r\n\t  },\r\n\t},\r\n  });\r\n\r\nconst CanvasEditor = () => {\r\n\tconst [bEraseCanvas, \tsetErase] \t\t= useState(false);\r\n\tconst [bDisableCanvas, \tdisableCanvas] \t= useState(false);\r\n\tconst [bPanning, \t\tsetPanning] \t= useState(true);\r\n\tconst [bSelect, \t\tsetSelection] \t= useState(false);\r\n\tconst [bSmooth, \t\tsetSmooth] \t\t= useState(false);\r\n\tconst [textOCRBox,      changeOCRText]  = useState(\"Selected text will appear here.\");\r\n\r\n\tconst [brushColor, \t\tsetBrushColor] \t\t= useState(\"#000000\");\r\n\tconst [brushThickness, \tsetBrushThickness] \t= useState(3);\r\n\tconst [zoomScale, \t\tsetZoomScale] \t\t= useState(0.35);\r\n\r\n\tconst OCRRef \t\t\t= useRef(null);\r\n\tconst smoothIconRef \t= useRef(null);\r\n\tconst zoomPanPitchRef \t= useRef(null);\r\n\tconst selectionIconRef \t= useRef(null);\r\n\tconst brushComboBoxRef \t= useRef(null);\r\n\tconst eraserIconRef \t= useRef(null);\r\n\tconst freeformIconRef \t= useRef(null);\r\n\tconst panningIconRef \t= useRef(null);\r\n\tconst colorPickerRef \t= useRef(null);\r\n\r\n\tconst drawingStylesBehaviours = new Map([\r\n\t\t['eraser', \t\t() => { setSmooth(false);\tsetErase(true); \tsetPanning(true); \tdisableCanvas(false);\tsetSelection(false); \t}],\r\n\t\t['freeform', \t() => { setSmooth(false);\tsetErase(false); \tsetPanning(true); \tdisableCanvas(false);\tsetSelection(false); \t}],\r\n\t\t['panning',\t\t() => { setSmooth(false);\tsetErase(false); \tsetPanning(false); \tdisableCanvas(true);\tsetSelection(false); \t}],\r\n\t\t['selection',\t() => { setSmooth(false);\tsetErase(false); \tsetPanning(true); \tdisableCanvas(false);\tsetSelection(true); \t}],\r\n\t\t['smoothing',\t() => { setSmooth(true);\tsetErase(false); \tsetPanning(true); \tdisableCanvas(false);\tsetSelection(false); \t}],\r\n\t]);\r\n\r\n\tconst iconRefMap = new Map([\r\n\t\t['eraser', \t\teraserIconRef],\r\n\t\t['freeform', \tfreeformIconRef],\r\n\t\t['panning',\t\tpanningIconRef],\r\n\t\t['selection',\tselectionIconRef],\r\n\t\t['smoothing',\tsmoothIconRef],\r\n\t]);\r\n\r\n\tconst setDrawingStyle = (newDrawingStyle) => {\r\n\t\tOCRRef.current.style.display = \"none\";\r\n\t\tif (newDrawingStyle === \"selection\") \r\n\t\t\tOCRRef.current.style.display = \"inline-block\";\r\n\t\tStopSelection();\r\n\t\ticonRefMap.get(drawingStyle).current.style.backgroundColor = \"transparent\";\r\n\t\tbrushThicknessMap.set(drawingStyle, brushThickness);\r\n\t\tdrawingStylesBehaviours.get(newDrawingStyle)();\r\n\t\tdrawingStyle = newDrawingStyle;\r\n\t\tif (drawingStyle !== \"smoothing\" && drawingStyle !== 'freeform' && drawingStyle !== 'eraser') {\r\n\t\t\tbrushComboBoxRef.current.innerHTML = \"             \";\r\n\t\t}\r\n\t\tsetBrushThickness(brushThicknessMap.get(drawingStyle));\r\n\t\ticonRefMap.get(drawingStyle).current.style.backgroundColor = \"#E8E8E8\";\r\n\t\tif (drawingStyle === \"panning\") return;\r\n\t\tif (brushThicknessMap.get(drawingStyle))\r\n\t\tbrushComboBoxRef.current.innerHTML = brushThicknessMap.get(drawingStyle);\r\n\t}\r\n\r\n\tconst handleKeyPress = (event) => {\r\n\t\tif (event.ctrlKey) {\r\n\t\t\tif (event.keyCode === 90) Undo();\r\n\t\t\telse if (event.keyCode === 89) Redo();\r\n\t\t\telse if (event.keyCode === 86) Paste();\r\n\t\t}\r\n\t\tif (event.keyCode === 37) MoveSelection(-1, 0);\r\n\t\telse if (event.keyCode === 38) MoveSelection(0, -1);\r\n\t\telse if (event.keyCode === 39) MoveSelection(1, 0);\r\n\t\telse if (event.keyCode === 40) MoveSelection(0, 1);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div onKeyUp={handleKeyPress}>\r\n\t\t\t<div style={{display: \"inline\", position: \"absolute\", bottom: \"2em\", right: \"3em\", zIndex: 1}}>\r\n\t\t\t\t<AddCircleIcon style={{'fontSize': '65px', 'transition': 'transform 0.2s'}} className='add-btn' onClick={() => { IncremenentPageCount(); \r\n\t\t\t\tif (drawingStyle === \"selection\") {\r\n\t\t\t\t\tsetDrawingStyle(\"panning\"); \r\n\t\t\t\t }}} />\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div style={{display: \"inline\", position: \"absolute\", top: \"5em\", left: \"5em\", zIndex: 1}}>\r\n\t\t\t\t<CssTextField label=\"\" id=\"custom-css-outlined-input\"\r\n\t\t\t\tref={OCRRef}\r\n\t\t\t\tstyle={{display: \"none\"}}\r\n\t\t\t\t// InputProps={{\r\n            \t// readOnly: true,\r\n          \t\t// }}\r\n\t\t\t\tvalue={textOCRBox}\r\n\t\t\t\tmultiline\r\n          \t\trows={5}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className=\"dashed-border\" style={{zIndex: 1}}>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t\t<div className=\"clickthrough_container\" style={{display: \"flex\", alignItems: \"center\", justifyContent: \"center\", backgroundColor: \"#FBFBFB\", padding: \"5px\"}}>\r\n\t\t\t\t<IconButton style={{color: \"#373936\"}} onClick={() => { Undo(); }}> <UndoIcon/> </IconButton>\r\n\t\t\t\t<IconButton style={{color: \"#373936\"}} onClick={() => { Redo(); }}> <RedoIcon/> </IconButton>\r\n\r\n\t\t\t\t<Box mx={3}></Box>\r\n\r\n\t\t\t\t<IconButton style={{color: \"#373936\", backgroundColor: \"#E8E8E8\", marginRight: 0}} onClick={() => { setDrawingStyle('freeform'); }} ref={freeformIconRef}> <CreateIcon/> </IconButton>\r\n\t\t\t\t<IconButton style={{color: \"#373936\"}} onClick={() => { setDrawingStyle('smoothing'); }} ref={smoothIconRef}> <AutoFixHighIcon/> </IconButton>\r\n\t\t\t\t<IconButton style={{color: \"#373936\"}} onClick={() => { setDrawingStyle('eraser'); }} ref={eraserIconRef}> <ClearAllIcon/> </IconButton>\r\n\t\t\t\t<IconButton style={{color: \"#373936\"}} onClick={() => { setDrawingStyle('panning'); }} ref={panningIconRef}> <OpenWithIcon/> </IconButton>\r\n\t\t\t\t<IconButton style={{color: \"#373936\"}} onClick={() => { setDrawingStyle('selection'); }} ref={selectionIconRef}> <PhotoSizeSelectLargeIcon/> </IconButton>\r\n\r\n\t\t\t\t<Box mx={3}></Box>\r\n\t\t\t\t\r\n\t\t\t\t<ComboBox defaultIndex={0} editable={false} style={{width: 42, height: 42, position: \"relative\"}} inputStyles={{display: \"hidden\"}} highlightColor=\"#DFDFDF\" selectedOptionColor=\"#FFFFFF\"\r\n\t\t\t\t\toptions={brushSizeOptions}\r\n\t\t\t\t\tonSelect={(option) => { setBrushThickness(option); \r\n\t\t\t\t\t\tbrushComboBoxRef.current.innerHTML = option;\r\n\t\t\t\t\t\tif (drawingStyle !== \"smoothing\" && drawingStyle !== 'freeform' && drawingStyle !== 'eraser') {\r\n\t\t\t\t\t\t\tbrushComboBoxRef.current.innerHTML = \"             \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}>\r\n\t\t\t\t</ComboBox>\r\n\t\t\t\t<p className=\"clickthrough\" ref={brushComboBoxRef} style={{position: \"absolute\", marginLeft: \"16.0em\", marginTop: \"1em\", padding: \"0.6em\", backgroundColor: \"#FBFBFB\", zOrder: 2}}> 3 </p>\r\n\r\n\t\t\t\t<IconButton style={{color: \"#373936\"}} onClick={() => { colorPickerRef.current.style.display = \"inline\"; }}> <FormatColorTextIcon/> </IconButton>\r\n\r\n\t\t\t\t<Box mx={3}></Box>\r\n\r\n\t\t\t\t<IconButton style={{color: \"#17C69A\"}}> <ShareIcon/> </IconButton>\r\n\t\t\t\t<Link to='/repo' style={{'textDecoration': 'none',  'color': 'inherit'}}>\r\n\t\t\t\t<IconButton style={{color: \"#17C69A\"}}> <GridViewIcon/> </IconButton>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div style={{backgroundColor: \"#FBFBFB\", boxShadow: \"inset 1px 1px 5px rgba(0, 0, 0, 0.2)\", padding: \"1px\", position:\"relative\"}}>\r\n\t\t\t\t<div ref={colorPickerRef} style={{display: \"none\", position: \"absolute\", marginLeft: \"40%\", marginTop: \"2em\", zIndex: 1}}>\r\n\t\t\t\t\t<SwatchesPicker width={300} height={150} color={brushColor} onChange={(event) => {\r\n\t\t\t\t\t\tsetBrushColor(event.hex);\r\n\t\t\t\t\t\tcolorPickerRef.current.style.display = \"none\";\r\n\t\t\t\t\t}}/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<TransformWrapper \r\n\t\t\t\tref={zoomPanPitchRef} \r\n\t\t\t\t{... {\r\n\t\t\t\t\tpanning: {...{disabled: bPanning}}, \r\n\t\t\t\t\tlimitToBounds: false,\r\n\t\t\t\t\tminScale: 0.1,\r\n\t\t\t\t\tinitialPositionX: (window.innerWidth - 2450*0.35)/2,\r\n\t\t\t\t\tinitialPositionY: 10,\r\n\t\t\t\t\tinitialScale: zoomScale,\r\n\t\t\t\t\tonZoom: (ref, event) => { setZoomScale(ref.state.scale); } \r\n\t\t\t\t}}>\r\n\t\t\t\t\t<TransformComponent>\r\n\t\t\t\t\t\t{ MultiPageCanvas(brushThickness, brushColor, bEraseCanvas, bDisableCanvas, bSmooth,\r\n\t\t\t\t\t\t\tchangeOCRText, zoomScale, OCRRef, bSelect) }\r\n\t\t\t\t\t</TransformComponent>\r\n\t\t\t\t</TransformWrapper>\r\n\t\t\t</div>\r\n\t\t</div>        \r\n\t)\r\n};\r\n\r\nexport { CanvasEditor };","import { useState, useEffect } from 'react';\r\n\r\nexport const useFetch = (url) => {\r\n    const [data, setData] = useState([])\r\n  \r\n    const getData = async () => {\r\n      const response = await fetch(url)\r\n      const data = await response.json()\r\n      setData(data)\r\n    }\r\n  \r\n    useEffect(() => {\r\n      getData()\r\n    }, [url])\r\n    return data;\r\n};\r\n","import React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport './Card.css'\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport ModeEditIcon from '@mui/icons-material/ModeEdit';\r\nimport FavoriteTwoToneIcon from '@mui/icons-material/FavoriteTwoTone';\r\nimport RestorePageIcon from '@mui/icons-material/RestorePage';\r\nimport DeleteForeverIcon from '@mui/icons-material/DeleteForever';\r\nimport { Backdrop } from '@mui/material';\r\nimport ShareIcon from '@mui/icons-material/Share';\r\n\r\n\r\n\r\nexport const Card = (\r\n   { id, title, image, date, isFavorite, idState, optionState, selectedOption, isSelected, page }\r\n) => {\r\n\r\n    const [myIdState, setMyIdState] = idState;\r\n    const [cardState, setCardState] = optionState;\r\n    const [option, setOption] = selectedOption;\r\n    const [selected, setSelected] = isSelected;\r\n\r\n    const handleChange = () => {\r\n        setMyIdState(id);\r\n        setCardState(!cardState);\r\n    }\r\n\r\n    const myId = id;\r\n    const favoriteState = isFavorite;\r\n    const idealState = (myIdState === myId && cardState)\r\n        return (\r\n            <>\r\n            <div className={`card-container ${idealState ? \"clicked\" : \"not-clicked\"}`} onClick={handleChange}> \r\n            {\r\n                (\r\n                    page !== 'deleted' ?\r\n                    <>\r\n                    <div className={`option-bar ${idealState ? \"clicked\" : \"not-clicked\"}`}>\r\n                        <Link to='/canvas' style={{'textDecoration': 'none',  'color': 'inherit'}}>\r\n                            <section className='option'>\r\n                                <ModeEditIcon className='option-icon' style={{'color' : 'black !important'}}/>\r\n                            </section>\r\n                        </Link>\r\n                        <section className={`option ${favoriteState ? 'isFavorite' : 'isNotFavorite'}`} onClick={() => {setOption('fav'); setSelected(true)}}>\r\n                            <FavoriteTwoToneIcon className={`option-icon ${favoriteState ? 'isFavorite-heart' : 'isNotFavorite-heart'}`}/>\r\n                        </section>\r\n                        <section className='option' onClick={() => {setOption('share'); setSelected(true)}}>\r\n                            <ShareIcon className='option-icon'/>\r\n                        </section>\r\n                        <section className='option' onClick={() => {setOption('delete'); setSelected(true)}}>\r\n                            <DeleteIcon className='option-icon'/>\r\n                        </section>\r\n                    </div>   \r\n                    </> \r\n                    :\r\n                    <div className={`option-bar-deleted ${idealState ? \"clicked\" : \"not-clicked\"}`}>\r\n                        <section className='option deleted' onClick={() => {setOption('restore'); setSelected(true)}}>\r\n                            <RestorePageIcon className='option-icon' />\r\n                        </section>\r\n                        <section className='option deleted' onClick={() => {setOption('remove'); setSelected(true)}}>\r\n                            <DeleteForeverIcon className='option-icon' />\r\n                        </section>\r\n                    </div>\r\n                )\r\n            }\r\n                <div className={`image-container ${idealState ? \"clicked\" : \"not-clicked\"}`}>\r\n                    <img style={{maxWidth: '100%'}} src={`${image}`} alt=\"\" />\r\n                </div>\r\n                <div className='cardtext-area'>\r\n                    <p className='card-text title'>{title}</p>\r\n                    <p className='card-text date'>created on: {date}</p> \r\n                </div>\r\n            </div>\r\n            </>\r\n        )\r\n}\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport './AddModal.css'\r\nimport Box from '@mui/material/Box';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport Select from '@mui/material/Select';\r\nimport { ChatLeftTextFill } from 'react-bootstrap-icons';\r\nimport 'semantic-ui-css/semantic.min.css'\r\nimport { Dropdown } from 'semantic-ui-react'\r\n\r\n\r\nexport const AddModal = (props) => {\r\n  const inputElement = useRef(null);\r\n  const optionElement = useRef(null);\r\n  const [state, setState] = props.state;\r\n  const type = props.type;\r\n  const addText = `${type === 'folder' ? 'Add Folder' : 'Open Notebook'}`\r\n  const folderArray = props.fldrs\r\n  const [choice, setChoice] = props.folderName;\r\n\r\n  const optionArray = folderArray.map(folder => {\r\n    return { key: folder.id, value: folder.id, text: folder.name };\r\n  });\r\n\r\n  const handleChange = (event) => {\r\n    const myFolder = folderArray.find(folder => folder.name === event.target.textContent)\r\n    setChoice(myFolder.id);\r\n  };\r\n\r\n  // useEffect(() => {\r\n  //   if (inputElement.current) {\r\n  //     inputElement.current.focus();\r\n  //   }\r\n  // }, []);\r\n\r\n    return (\r\n      <Modal className='mdl-body'\r\n        {...props}\r\n        size=\"lg\"\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title className='w-100 text-center' id=\"contained-modal-title-vcenter\">\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        {\r\n          props.page === 'all' ?\r\n          (\r\n    \r\n            <Modal.Body className='w-100 text-center all-folder'>\r\n            <h4 className='mdl-text'>ENTER THE NAME FOR YOUR NOTEBOOK AND PICK THE FOLDER WHERE YOU WILL SAVE IT</h4>\r\n            <div class='input-folder-layout'>\r\n              <input autoFocus placeholder=\"    Enter name...\" className='mdl-input' style={{'margin-right': '20px'}} type=\"text\" ref={inputElement} onChange={event => setState(event.target.value)}/>\r\n              {\r\n                props.page === 'all' &&\r\n                <Dropdown\r\n                style = {{'width' : '170px', 'height' : '30px', 'margin-top' : '27px', 'margin-left' : '60px', 'border' : '1.5px solid #56c9ac'}}\r\n                placeholder='Select Folder'\r\n                fluid\r\n                selection\r\n                options={optionArray} \r\n                onChange={handleChange}/>\r\n              }\r\n            </div>\r\n            </Modal.Body>\r\n          )\r\n          :\r\n          (\r\n            <Modal.Body className='w-100 text-center'>\r\n            <h4 className='mdl-text'>ENTER THE NAME FOR YOUR {type === 'folder' ? 'FOLDER' : 'NOTEBOOK'}</h4>\r\n            <input autoFocus placeholder=\"    Enter name...\" className='mdl-input' type=\"text\" ref={inputElement} onChange={event => setState(event.target.value)}/>\r\n            </Modal.Body>\r\n          )\r\n        }\r\n        <Modal.Footer>\r\n          <button className='button-28' onClick={props.onHide, props.add}>{addText}</button>\r\n          <button className='button-28' onClick={props.onHide}>Cancel</button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    );\r\n  }","import React, { useState, useRef, useEffect } from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport './DeleteModal.css'\r\n\r\nexport const DeleteModal = (props) => {\r\n\r\n    return (\r\n      <Modal className='mdl-body'\r\n        {...props}\r\n        aria-labelledby=\"contained-modal-title-vcenter\"\r\n        centered\r\n      >\r\n        <Modal.Header closeButton>\r\n          <Modal.Title className='w-100 text-center' id=\"contained-modal-title-vcenter\" >\r\n          </Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className='w-100 text-center' style={{'height' : '120px !important'}}>\r\n          <h4 className='mdl-text'>Are you sure you want to permanently delete this notebook?</h4>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <button className='button-2' onClick={props.onHide, props.remove}>Yes</button>\r\n          <button className='button-2' onClick={props.onHide}>Cancel</button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    );\r\n  }","import React, { useState, useRef } from 'react';\r\nimport './GallerySection.css'\r\nimport { Sidebar } from './Sidebar';\r\nimport { Card } from './Card';\r\nimport { useFetch } from '../useFetch';\r\nimport { AddModal } from './AddModal';\r\nimport { DeleteModal } from './DeleteModal';\r\nimport moment from 'moment'; \r\nimport { useEffect } from 'react';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\nimport { BsBoxArrowInLeft } from \"react-icons/bs\";\r\nimport Button from '@mui/material/Button';\r\nimport Grow from '@mui/material/Grow';\r\nimport { Dropdown } from 'semantic-ui-react'\r\n\r\n\r\n// Fake Json APIs for testing\r\nconst notebook_url = 'https://mocki.io/v1/5b073560-9d5c-4289-9d07-790ae8b59876';  \r\n// const cover_url = 'https://mocki.io/v1/590c2c5a-a010-49cb-b0e3-2b1524921e8f';\r\nconst cover_url = 'https://mocki.io/v1/5664ee9c-96c0-416b-876c-f15dfc1d4337';\r\n\r\n\r\nexport const randomNumber = (min, max) => {\r\n    const r = Math.random()*(max-min) + min\r\n    return Math.floor(r)\r\n}\r\n\r\nconst sortOptions = [\r\n    {\r\n        key: '0',\r\n        text: 'no specific order',\r\n        value: 'no specific order',\r\n      },\r\n    {\r\n        key: '1',\r\n        text: 'sorted alphabetically',\r\n        value: 'sorted alphabetically',\r\n      },\r\n      {\r\n        key: '2',\r\n        text: 'sorted by date',\r\n        value: 'sorted by date',\r\n      },\r\n      {\r\n        key: '3',\r\n        text: 'recently used',\r\n        value: 'recently used',\r\n      }\r\n]\r\n\r\nexport const GallerySection = (props) => {\r\n    const sidebarValue = props.isSidebar;\r\n    const [folderState, setFolderState] = props.folderState;\r\n\r\n    const notebooks = useFetch(notebook_url);\r\n    const covers = useFetch(cover_url);\r\n\r\n    const [inputState, setInputState] = useState('');\r\n\r\n    const [visibleNotebooks, setVisibleNotebooks] = useState([]);\r\n    const [modalShow, setModalShow] = useState(false);\r\n    const [delModalShow, setDelModalShow] = useState(false);\r\n    const [title, setTitle] = useState('Untitled');\r\n    const [idState, setIdState] = useState(-1);\r\n    const [optionState, setOptionState] = useState(false);\r\n    const myFolders= props.allFolders;\r\n    const [folderChoice, setFolderChoice] = useState('');\r\n    const [folderName, setFolderName] = useState('');\r\n\r\n    const [selectedOption, setSelectedOption] = useState('');\r\n    const [isSelected, setIsSelected] = useState(false);\r\n\r\n\r\n    const setMyNotebooks = () => {\r\n        const folderId = folderState;\r\n        setVisibleNotebooks(notebooks);\r\n        if (folderId === 'all')\r\n        {\r\n            setVisibleNotebooks((notebooks) => {\r\n                return notebooks.filter((notebook) => !notebook.isDeleted)\r\n            })\r\n        }\r\n        else\r\n        if (folderId === 'deleted')\r\n        {\r\n            setVisibleNotebooks((notebooks) => {\r\n                return notebooks.filter((notebook) => notebook.isDeleted)\r\n            })\r\n        }\r\n        else\r\n        if (folderId === 'favorites')\r\n        {\r\n            setVisibleNotebooks((notebooks) => {\r\n                return notebooks.filter((notebook) => notebook.isFavorite && !notebook.isDeleted)\r\n            })\r\n        }\r\n        else\r\n        {\r\n            setVisibleNotebooks((notebooks) => {\r\n                return notebooks.filter((notebook) => notebook.folder_id.toString() === folderId && !notebook.isDeleted)\r\n            })\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        setMyNotebooks();\r\n        if (inputState !== '') \r\n        {\r\n            const keyword = inputState.toLowerCase();\r\n            setVisibleNotebooks((notebooks) => {\r\n                return notebooks.filter((notebook) => notebook.title.toString().toLowerCase().search(keyword) !== -1)\r\n            })\r\n        }\r\n    }, [inputState, folderState, notebooks])\r\n\r\n    const countNameOccurences = () => {\r\n        const re1 =  new RegExp(title);\r\n        const re2 = /\\(([0-9])+\\)/;\r\n        var flags = (re1.flags + \r\n            re2.flags).split(\"\")\r\n                .sort().join(\"\") \r\n        var regex = new RegExp(re1.source\r\n                    + re2.source, flags);\r\n        return notebooks.reduce((a, notebook) => (!notebook.isDeleted && title === notebook.title || regex.test(notebook.title) ? a + 1 : a), 0)\r\n    }\r\n\r\n\r\n    const addNewNotebook = () => {\r\n        setModalShow(false);\r\n        const randomIndex = randomNumber(0, covers.length - 1);\r\n        const myPhotoUrl = covers[randomIndex].photo_url;\r\n        const titleOccur = countNameOccurences();\r\n        const eventualTitle = title.concat('(', titleOccur, ')')\r\n        const newNb = {\r\n            id : new Date().getTime().toString(),\r\n            title : `${titleOccur > 0 ? eventualTitle : title}`,\r\n            date : moment().format(\"DD/MM/YYYY\"),\r\n            isFavorite : false,\r\n            image : `${myPhotoUrl}`,\r\n            folder_id : `${folderState !== 'all' ? folderState : folderChoice}`,\r\n            isDeleted: false\r\n        }\r\n        notebooks.push(newNb);\r\n        setTitle('Untitled');\r\n        setMyNotebooks();\r\n    }\r\n\r\n    const handleSortChange = (event, data) => {\r\n        if (event.target.textContent === 'no specific order');\r\n        {\r\n            notebooks.sort((a,b) => (a.id > b.id) ? 1 : ((b.id > a.id) ? -1 : 0))\r\n            setMyNotebooks();\r\n        }   \r\n        if (event.target.textContent === 'sorted alphabetically')\r\n        {\r\n            notebooks.sort((a,b) => (a.title > b.title) ? 1 : ((b.title > a.title) ? -1 : 0))\r\n            setMyNotebooks();\r\n        }\r\n        if (event.target.textContent === 'sorted by date')\r\n        {\r\n            notebooks.sort(function(a, b){\r\n                var aa = a.date.split('/').reverse().join(),\r\n                    bb = b.date.split('/').reverse().join();\r\n                return aa < bb ? -1 : (aa > bb ? 1 : 0);\r\n            });\r\n            setMyNotebooks();\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (isSelected)\r\n        {\r\n            if (selectedOption === 'fav')\r\n                editFavorites();\r\n            if (selectedOption === 'delete')\r\n                deleteNotebook();\r\n            if (selectedOption === 'restore')\r\n                restoreNotebook();\r\n            if (selectedOption === 'remove')\r\n                setDelModalShow(true);\r\n            setIsSelected(false);\r\n        }\r\n    })\r\n\r\n    const editFavorites = () => {\r\n        const id = idState;\r\n        const index = notebooks.findIndex((notebook => notebook.id === id));\r\n        notebooks[index].isFavorite = !notebooks[index].isFavorite;\r\n        setMyNotebooks();\r\n    }\r\n\r\n    const deleteNotebook = () => {\r\n        const id = idState;\r\n        const index = notebooks.findIndex((notebook => notebook.id === id));\r\n        notebooks[index].isDeleted = true;\r\n        notebooks[index].isFavorite = false;\r\n        setMyNotebooks();\r\n    }\r\n\r\n    const restoreNotebook = () => {\r\n        const id = idState;\r\n        const index = notebooks.findIndex((notebook => notebook.id === id));\r\n        notebooks[index].isDeleted = false;\r\n        setMyNotebooks();\r\n    }\r\n\r\n    const removeNotebook = () => {\r\n        const id = idState;\r\n        const index = notebooks.findIndex((notebook => notebook.id === id));\r\n        notebooks.splice(index, 1);\r\n        setDelModalShow(false);\r\n        setMyNotebooks();\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (folderState !== 'all') {\r\n            if (folderState === 'favorites')  setFolderName('Favorites');\r\n            else\r\n            if (folderState === 'deleted') setFolderName('Trashcan');\r\n            else{\r\n                const fol = myFolders.find(folder => folder.id.toString() === folderState.toString())\r\n                setFolderName(fol.name)\r\n            }      \r\n        }\r\n    })\r\n\r\n    return (\r\n        <>\r\n        <div className='gallery'>\r\n            <div className='gallery-header'>\r\n                <input className='gallery-input' \r\n                        type=\"text\" \r\n                        placeholder=\"   Search for files..\" \r\n                        name='Search' \r\n                        onChange={event => setInputState(event.target.value)}/>\r\n                {\r\n                folderState === 'all' ||\r\n                <div className='folder-page'>\r\n                    <div className='back' onClick={() => setFolderState('all')}>\r\n                        <BsBoxArrowInLeft style={{'fontSize': '20px', 'fontWeight' : '2px'}} className='back-btn'/>\r\n                        <p className='back-text'>View all notebooks</p>\r\n                    </div>\r\n                    <h3 className='folder-header'>{folderName}</h3>\r\n                </div>\r\n                }   \r\n                {\r\n                folderState === 'all' && \r\n                <div className='sort'>\r\n                    Show {' '}\r\n                    <Dropdown\r\n                    inline\r\n                    options={sortOptions}\r\n                    defaultValue={sortOptions[0].value}\r\n                    onChange={handleSortChange}\r\n                    />\r\n                </div>\r\n                }\r\n            </div>\r\n                {folderState === 'all' ||\r\n                <hr className='hr3'></hr>\r\n                }\r\n                <div className={`${sidebarValue ? 'card-section--small' : 'card-section--big'}`}>\r\n                {\r\n                    visibleNotebooks.map((notebook) => {\r\n                    return (\r\n                        <Card  \r\n                        key = {notebook.id}\r\n                        id = {notebook.id}\r\n                        title = {notebook.title}\r\n                        date = {notebook.date}\r\n                        isFavorite = {notebook.isFavorite}\r\n                        isDeleted = {notebook.isDeleted}\r\n                        image = {notebook.image}\r\n                        idState = {[idState, setIdState]}\r\n                        optionState = {[optionState, setOptionState]}\r\n                        selectedOption={[selectedOption, setSelectedOption]}\r\n                        isSelected={[isSelected, setIsSelected]}\r\n                        page = {folderState}\r\n                        />)\r\n                    })\r\n                }\r\n                </div>\r\n                {\r\n                    folderState !== 'favorites' && folderState !== 'deleted' &&\r\n                    // <img src=\"https://i.ibb.co/tbk3M2c/Buton-modified.png\" style={{'transition': 'transform 0.2s'}} alt=\"\" className='add-btn' onClick={() => setModalShow(true)}/>\r\n                    <AddCircleIcon style={{'fontSize': '65px', 'transition': 'transform 0.2s'}} className='add-btn' onClick={() => setModalShow(true)}/>\r\n                }\r\n        </div>\r\n        <AddModal\r\n            show={modalShow}\r\n            type='notebook'\r\n            state={[title, setTitle]}\r\n            onHide={() => setModalShow(false)}\r\n            add={() => addNewNotebook()}\r\n            page={folderState}\r\n            fldrs={myFolders}\r\n            folderName={[folderChoice, setFolderChoice]}\r\n            />\r\n        <DeleteModal \r\n            show={delModalShow}\r\n            onHide={() => setDelModalShow(false)}\r\n            remove={removeNotebook}\r\n        />\r\n        </>\r\n    )\r\n}","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Sidebar.css'\r\nimport { styled, useTheme } from '@mui/material/styles';\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\nimport { useFetch } from '../useFetch';\r\nimport { randomNumber } from './GallerySection';\r\nimport CreateNewFolderIcon from '@material-ui/icons/CreateNewFolder';\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { GallerySection } from './GallerySection';\r\nimport { AddModal } from './AddModal';\r\nimport { Collapse } from \"react-collapse\";\r\nimport Switch from '@mui/material/Switch';\r\nimport SwipeableDrawer from '@mui/material/SwipeableDrawer';\r\nimport Drawer from '@mui/material/Drawer';\r\nimport { Input } from 'semantic-ui-react';\r\n\r\n\r\nconst folder_url ='https://mocki.io/v1/74c041f6-8104-4239-9ff2-208e32ec6f61';\r\nconst colors = ['#e6f057', '#37b9e4', '#e96b6b', '#912eaa', '#828282', ' #84be6d']\r\n\r\nconst Main = styled('main', { shouldForwardProp: (prop) => prop !== 'open' })(\r\n    ({ theme, open }) => ({\r\n      flexGrow: 1,\r\n      padding: theme.spacing(3),\r\n      transition: theme.transitions.create('margin', {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n      }),\r\n      marginTop: 80,\r\n      marginLeft: 350,\r\n      ...(open && {\r\n        transition: theme.transitions.create('margin', {\r\n          easing: theme.transitions.easing.easeOut,\r\n          duration: theme.transitions.duration.enteringScreen,\r\n        }),\r\n        marginLeft: 0,\r\n      }),\r\n    }),\r\n  );\r\n\r\nexport const Sidebar = (props) => {\r\n    const [sidebarState, setSidebarState] = props.sidebarState;\r\n    const fdlr = useFetch(folder_url);\r\n\r\n    const [folders, setFolders] = useState([]);\r\n    const [input, setInput] = useState('');\r\n    const [modalShow, setModalShow] = useState(false);\r\n    const [name, setName] = useState('Untitled');\r\n    const [notesFromFolder, setNotesFromFolder] = useState('all');\r\n    const [showFolders, setShowFolders] = useState(true);\r\n    const [checked, setChecked] = useState(true);\r\n    const [folderChoice, setFolderChoice] = useState('');\r\n\r\n    const handleChange = () => {\r\n        setChecked(false);\r\n        setTimeout(setChecked(true), 3000);\r\n      };\r\n\r\n    const countNameOccurences = () => {\r\n        const re1 =  new RegExp(name);\r\n        const re2 = /\\(([0-9])+\\)/;\r\n        var flags = (re1.flags + \r\n            re2.flags).split(\"\")\r\n                .sort().join(\"\") \r\n        var regex = new RegExp(re1.source\r\n                    + re2.source, flags);\r\n        return folders.reduce((a, folder) => (name === folder.name || regex.test(folder.name) ? a + 1 : a), 0)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (input === '') \r\n            setFolders(fdlr);\r\n        else\r\n        {\r\n            if (!showFolders) \r\n                setShowFolders(true);\r\n            const keyword = input.toLowerCase();\r\n            setFolders(fdlr);\r\n            setFolders((folders) => {\r\n                return folders.filter((folder) => folder.name.toString().toLowerCase().search(keyword) !== -1)\r\n            })\r\n        }\r\n    })\r\n\r\n    const addFolder= () => {\r\n        setModalShow(false);\r\n        const randomIndex = randomNumber(0, colors.length - 1);\r\n        const nameOccur = countNameOccurences();\r\n\r\n        const finalName = `${nameOccur === 0 ? name : name.concat('(', nameOccur, ')')}`;\r\n        const newFolder = {\r\n            id: `${fdlr.length}` + 1,\r\n            name: `${finalName}`,\r\n            color: `${colors[randomIndex]}`\r\n        }\r\n        fdlr.push(newFolder);\r\n        setName('Untitled');\r\n    }\r\n    \r\n\r\n    return (\r\n    <React.Fragment>\r\n    <React.Fragment>\r\n          <Drawer \r\n            variant=\"persistent\"\r\n            anchor=\"left\"\r\n            open={sidebarState}\r\n          >\r\n        <div className='sidebar-container'>\r\n            <React.Fragment>\r\n                <div className='input-section'>\r\n                    <input className='inputStyle noSelect' \r\n                    type=\"text\" placeholder='   Search for folders..' \r\n                    name='Search'\r\n                    onChange={event => setInput(event.target.value)}\r\n                    />\r\n                    <CreateNewFolderIcon className=\"add-file-button\" style={{'fontSize': '34px', 'transition': 'transform 0.2s'}} onClick={() => setModalShow(true)}/>\r\n                </div>\r\n                <div className='sidebar-list'>\r\n                <div className='sidebar-bigItem noSelect' onClick={() => {setShowFolders(!showFolders)}}>\r\n                    <FolderIcon className=\" icon\" style={{ 'fontSize' : '27px', marginRight: 10}}/>\r\n                    Folders\r\n                </div>\r\n                <Collapse isOpened={showFolders}>\r\n                    <ul className='sidebar-list'>\r\n                        {\r\n                            folders.map((folder) => {\r\n                                return (\r\n                                <li className='sidebar-item noSelect' onClick={handleChange, () => setNotesFromFolder(`${folder.id}`)}>\r\n                                    <FolderIcon className=\"icon\" style={{'color' : folder.color, marginRight: 10}}/>\r\n                                    {folder.name}\r\n                                </li>\r\n                                )\r\n                            })\r\n                        }\r\n                    </ul>\r\n                </Collapse>\r\n                <div className='sidebar-bigItem noSelect' onClick={handleChange, () => setNotesFromFolder('favorites')}>\r\n                    <FavoriteIcon className=\"icon\" style={{'color' : '#e97979', 'fontSize' : '28px', marginRight: 10}}/>\r\n                    Favorites\r\n                </div>\r\n                <div className='sidebar-bigItem noSelect' onClick={handleChange, () => setNotesFromFolder('deleted')}>\r\n                    <DeleteIcon className=\"icon\" style={{'color' : '#727272', 'fontSize' : '28px', marginRight: 10}}/>\r\n                    Trashcan\r\n                </div>\r\n                </div>\r\n            </ React.Fragment>\r\n        </div>\r\n          </Drawer>\r\n    </React.Fragment>\r\n    <Main open={!sidebarState}>\r\n        <GallerySection \r\n        isSidebar={sidebarState} \r\n        switchState={[checked, setChecked]}\r\n        folderState={[notesFromFolder, setNotesFromFolder]}\r\n        allFolders={folders}\r\n        />\r\n    </Main>\r\n    <AddModal\r\n        show={modalShow}\r\n        type='folder'\r\n        state={[name, setName]}\r\n        onHide={() => setModalShow(false)}\r\n        add={() => addFolder()}\r\n        fldrs={folders}\r\n        folderName={[folderChoice, setFolderChoice]}\r\n        />\r\n    </ React.Fragment>\r\n    );\r\n  };\r\n   \r\n  export default Sidebar;","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport './Navbar.css'\r\nimport { List } from 'react-bootstrap-icons';\r\nimport { Sidebar } from './Sidebar'\r\nimport { GallerySection } from './GallerySection';\r\n\r\n\r\nconst Navbar = () => {\r\n\r\n    const [isSidebar, setIsSidebar] = useState(true);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <nav className='nb-navbar'>\r\n                <div className=\"navbar-container\">\r\n                   <List className=\"bi bi-list list-icon\" onClick={() => setIsSidebar(!isSidebar)}/>\r\n                   <Link to=\"/\" className=\"navbar-logo noSelect\">\r\n                        <img src={'logo.PNG'} style={{width: 150}}/>\r\n                   </Link>    \r\n                </div>   \r\n                <ul className='nb-nav-menu'>\r\n                       <div className='account-section'>\r\n                            <div className='photo' style={{'backgroundImage' : 'url(https://as1.ftcdn.net/v2/jpg/03/46/83/96/1000_F_346839683_6nAPzbhpSkIpb8pmAwufkC7c5eD7wYws.jpg'}}></div>\r\n                            <p className='username'>Username Here</p>\r\n                       </div>\r\n                       <li className='nav-item noSelect'>\r\n                           <Link to='/' className='nav-links'>\r\n                               HOME\r\n                           </Link>\r\n                       </li>\r\n                       <li className='nav-item noSelect'>\r\n                           <Link to='/' className='nav-links'>\r\n                                LOG OUT\r\n                           </Link>\r\n                       </li>\r\n                   </ul> \r\n            </nav>\r\n            <Sidebar \r\n                sidebarState={[isSidebar, setIsSidebar]} />\r\n        </ React.Fragment>\r\n    )}\r\n\r\nexport default Navbar\r\n\r\n","import React from 'react';\r\nimport './index.css';\r\nimport ReactDOM from 'react-dom';\r\nimport { HashRouter, Router, Switch, Route } from 'react-router-dom';\r\nimport { Homepage } from './App';\r\nimport { CanvasEditor } from './canvas/Canvas';\r\nimport { NotebookRepository } from './notebook_gallery/NotebookRepository'\r\n\r\nReactDOM.render(\r\n    <Router>\r\n       <Switch>\r\n\t\t        <Route exact path=\"/\" component = { Homepage }/>\r\n\t\t\t    <Route exact path=\"/repo\" component = { NotebookRepository }/>\r\n\t\t\t    <Route exact path=\"/canvas\" component = { CanvasEditor }/>\r\n\t    </Switch> \r\n    </Router>,\r\n    document.getElementById('root')\r\n);","import React, { useEffect } from 'react';\r\nimport './App.css';\r\nimport Home from './components/pages/HomePage/Home';\r\nimport Footer from './components/pages/Footer/Footer'\r\nimport Navbar from './components/Navbar';\r\n\r\nconst EnableScroll = () => {\r\n\tconst safeDocument = typeof document !== 'undefined' ? document : {};\r\n\tconst { body } = safeDocument;\r\n    if (!body || !body.style) return;\r\n    body.style.overflow = 'auto'; \r\n}\r\n\r\nexport const Homepage = () => {\r\n\tuseEffect(() => {\r\n\t\tEnableScroll();\r\n\t});\r\n\r\n\treturn (\r\n\t\t\r\n\t\t<div>\r\n\t\t\t<Navbar />\r\n\t\t\t<Home/>\r\n\t\t\t<Footer />\r\n\t\t</div>\r\n\t\t\r\n\t\t\r\n\t)\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Navbar from './components/Navbar';\r\nimport Sidebar from './components/Sidebar';\r\nimport { GallerySection } from './components/GallerySection';\r\n\r\nconst DisableScroll = () => {\r\n\tconst safeDocument = typeof document !== 'undefined' ? document : {};\r\n\tconst { body } = safeDocument;\r\n    if (!body || !body.style) return;\r\n    body.style.overflow = 'hidden'; \r\n}\r\n\r\nexport const NotebookRepository = () => {\r\n    useEffect(() => {\r\n        DisableScroll();\r\n    });\r\n\r\n\treturn (\r\n        <React.Fragment>\r\n            <Navbar />\r\n        </React.Fragment>\r\n\t)\r\n};"],"sourceRoot":""}